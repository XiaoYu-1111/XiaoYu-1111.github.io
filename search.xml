<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>基于Qt、C++的SeisMonitor实时地震台站监测模块</title>
    <url>/2026/01/20/SeisMonitor%E5%AE%9E%E6%97%B6%E5%9C%B0%E9%9C%87%E5%8F%B0%E7%AB%99%E7%9B%91%E6%B5%8B%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/</url>
    <content><![CDATA[<h1 id="SeisMonitor-实时地震台站监测系统技术文档"><a href="#SeisMonitor-实时地震台站监测系统技术文档" class="headerlink" title="SeisMonitor - 实时地震台站监测系统技术文档"></a>SeisMonitor - 实时地震台站监测系统技术文档</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>SeisMonitor是一款基于Qt、C++开发的实时地震台站监测系统，主要用于对地震台站的信号进行实时监测、数据处理、数据分析、数据可视化，并提供数据导出功能。</p>
<span id="more"></span>
<h1 id="界面展示"><a href="#界面展示" class="headerlink" title="界面展示"></a>界面展示</h1><p><strong>主页</strong><br><img src="home.png" alt="主页"><br><strong>主页布局</strong><br><img src="0_主页面布局_light.png" alt="系统架构图light"><br><img src="0_主页面布局_night.png" alt="系统架构图night"></p>
<p><strong>监测台站显示</strong><br><img src="台站显示地图.png" alt="台站显示"></p>
<p><strong>波形与时频分析瀑布图</strong><br><img src="波形与时频分析瀑布图.png" alt="台站显示"></p>
<p><strong>台站记录测试数据</strong><br><img src="台站记录测试数据.png" alt="台站记录测试数据"></p>
<p><strong>异常信号检测</strong><br><img src="人工信号地震预警测试.png" alt="人工信号地震预警测试"></p>
<h2 id="1-产品概述-Product-Overview"><a href="#1-产品概述-Product-Overview" class="headerlink" title="1. 产品概述 (Product Overview)"></a>1. 产品概述 (Product Overview)</h2><p><strong>SeisMonitor</strong> 是一款基于 <strong>Qt 6 (C++)</strong> 和 <strong>OpenGL</strong> 技术构建的专业级地球物理数据监测终端。该软件专为地震学研究人员、台网监测人员及地球科学爱好者设计，支持通过国际通用的 <strong>SeedLink 协议</strong> 实时接入全球地震台网（如 GEOFON, IRIS 等），提供毫秒级延迟的波形显示、实时信号处理、时频分析及全球台站地理信息可视化功能。</p>
<h2 id="2-软件特点与核心优势-Key-Features-amp-Advantages"><a href="#2-软件特点与核心优势-Key-Features-amp-Advantages" class="headerlink" title="2. 软件特点与核心优势 (Key Features &amp; Advantages)"></a>2. 软件特点与核心优势 (Key Features &amp; Advantages)</h2><h3 id="2-1-高性能实时渲染"><a href="#2-1-高性能实时渲染" class="headerlink" title="2.1 高性能实时渲染"></a>2.1 高性能实时渲染</h3><ul>
<li><strong>极速绘图引擎</strong>：基于深度优化的 <code>QCustomPlot</code> 和 <code>QML</code> 技术，支持在大数据量下流畅显示三分量（Z/N/E）波形及高分辨率瀑布图。</li>
<li><strong>低延迟架构</strong>：采用异步 TCP Socket 通信与双缓冲机制，确保数据包到达与屏幕刷新之间的延迟降至最低。</li>
<li><strong>海量地图标记</strong>：利用 QML <code>Instantiator</code> 与纹理优化技术，实现在地图上流畅渲染 <strong>17,000+</strong> 个台站节点，支持毫秒级交互响应。</li>
</ul>
<h3 id="2-2-专业级信号处理-DSP-Pipeline"><a href="#2-2-专业级信号处理-DSP-Pipeline" class="headerlink" title="2.2 专业级信号处理 (DSP Pipeline)"></a>2.2 专业级信号处理 (DSP Pipeline)</h3><ul>
<li><strong>实时滤波管道</strong>：内置 <strong>IIR 巴特沃斯滤波器</strong>（低通、高通、带通），支持用户动态调整截止频率，实时去除背景噪声。</li>
<li><strong>基线校正</strong>：支持实时 <strong>去均值 (Demean)</strong>，自动消除仪器零漂，确保波形居中显示。</li>
<li><strong>时频分析</strong>：集成实时 <strong>短时傅里叶变换 (STFT)</strong>，以瀑布图（Spectrogram）形式直观展示频率能量随时间的变化，辅助识别干扰信号（如 50Hz 工频干扰）。</li>
</ul>
<h3 id="2-3-智能事件检测-Smart-Detection"><a href="#2-3-智能事件检测-Smart-Detection" class="headerlink" title="2.3 智能事件检测 (Smart Detection)"></a>2.3 智能事件检测 (Smart Detection)</h3><ul>
<li><strong>STA/LTA 触发算法</strong>：内置经典的短时/长时平均比法自动检测算法。</li>
<li><strong>可视化报警</strong>：当地震发生时，波形图自动绘制 <strong>红色触发线 (ON)</strong> 和 <strong>绿色结束线 (OFF)</strong>，并在状态栏显示警报。</li>
<li><strong>参数可调</strong>：支持用户针对不同环境噪声水平，实时调整 STA/LTA 窗口长度及触发阈值。</li>
</ul>
<h3 id="2-4-现代交互体验-Modern-UX"><a href="#2-4-现代交互体验-Modern-UX" class="headerlink" title="2.4 现代交互体验 (Modern UX)"></a>2.4 现代交互体验 (Modern UX)</h3><ul>
<li><strong>Dock 布局系统</strong>：采用 Visual Studio 风格的可停靠窗口设计，用户可自由拖拽、重组波形图、地图、控制台和设置面板，支持多屏工作。</li>
<li><strong>深色/浅色主题</strong>：内置专业的“科研白”与“暗黑监测”模式，适应白天办公与夜间值守场景，图表配色（如 Viridis, Turbo, Seismic）符合科学可视化标准。</li>
<li><strong>多维联动</strong>：<ul>
<li><strong>光标同步</strong>：在波形图上移动鼠标，Z/N/E 分量及瀑布图的光标线精准同步，便于对比相位。</li>
<li><strong>图地联动</strong>：点击地图台站 -&gt; 自动切换数据流；切换数据流 -&gt; 地图自动高亮定位。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="3-功能模块详解-Functional-Modules"><a href="#3-功能模块详解-Functional-Modules" class="headerlink" title="3. 功能模块详解 (Functional Modules)"></a>3. 功能模块详解 (Functional Modules)</h2><h3 id="3-1-数据连接与管理-Connection-Manager"><a href="#3-1-数据连接与管理-Connection-Manager" class="headerlink" title="3.1 数据连接与管理 (Connection Manager)"></a>3.1 数据连接与管理 (Connection Manager)</h3><ul>
<li><strong>多服务器预设</strong>：内置 GEOFON (德国)、IRIS (美国)、RESIF (欧洲) 等主流数据中心地址，支持一键切换。</li>
<li><strong>FDSN 元数据同步</strong>：后台自动下载最新的台站经纬度信息，构建本地台站数据库。</li>
<li><strong>智能列表</strong>：自动获取当前服务器可用的实时流列表，支持通过下拉框快速检索。</li>
</ul>
<h3 id="3-2-实时波形视图-Waveform-Viewer"><a href="#3-2-实时波形视图-Waveform-Viewer" class="headerlink" title="3.2 实时波形视图 (Waveform Viewer)"></a>3.2 实时波形视图 (Waveform Viewer)</h3><ul>
<li><strong>三分量显示</strong>：独立显示垂直 (Z)、北向 (N)、东向 (E) 分量，支持独立或同步缩放。</li>
<li><strong>自适应量程</strong>：支持 <strong>Auto-Scale</strong>（根据振幅自动调整 Y 轴）和手动指定量程（如 ±2000 Counts）。</li>
<li><strong>交互操作</strong>：<ul>
<li><strong>平移/缩放</strong>：鼠标拖拽平移，滚轮缩放时间轴。</li>
<li><strong>数据框选</strong>：按住 Shift 键框选特定波形段进行高亮分析。</li>
<li><strong>通道控制</strong>：可通过底部复选框快速隐藏/显示特定分量。</li>
</ul>
</li>
</ul>
<h3 id="3-3-全球台站地图-GIS-Module"><a href="#3-3-全球台站地图-GIS-Module" class="headerlink" title="3.3 全球台站地图 (GIS Module)"></a>3.3 全球台站地图 (GIS Module)</h3><ul>
<li><strong>混合地图源</strong>：集成高德地图（AutoNavi），支持 <strong>标准矢量图</strong> 和 <strong>卫星影像图</strong> 一键切换。</li>
<li><strong>坐标纠偏</strong>：内置 <strong>WGS-84 到 GCJ-02</strong> 转换算法，确保中国境内台站位置与高德底图精准重合。</li>
<li><strong>状态可视化</strong>：<ul>
<li>🔴 <strong>红色三角形</strong>：离线台站（元数据存在，但无实时流）。</li>
<li>🟢 <strong>绿色三角形</strong>：在线台站（服务器当前可用）。</li>
<li>🟡 <strong>黄色三角形</strong>：当前正在监测的台站。</li>
<li>🔵 <strong>青色高亮</strong>：鼠标选中的台站。</li>
</ul>
</li>
<li><strong>性能优化</strong>：支持图层过滤（显示/隐藏离线台站），极大提升渲染性能。</li>
</ul>
<h3 id="3-4-数据录制与日志-Recording-amp-Logging"><a href="#3-4-数据录制与日志-Recording-amp-Logging" class="headerlink" title="3.4 数据录制与日志 (Recording &amp; Logging)"></a>3.4 数据录制与日志 (Recording &amp; Logging)</h3><ul>
<li><strong>Mini-SEED 录制</strong>：支持将接收到的原始二进制数据包直接保存为标准的 <code>.mseed</code> 文件，兼容 ObsPy、SAC 等专业软件。</li>
<li><strong>系统控制台</strong>：底部集成日志输出窗口，实时记录连接状态、数据包到达时间、采样率变更及触发事件，支持日志导出。</li>
</ul>
<hr>
<h2 id="4-技术架构-Technical-Architecture"><a href="#4-技术架构-Technical-Architecture" class="headerlink" title="4. 技术架构 (Technical Architecture)"></a>4. 技术架构 (Technical Architecture)</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">组件</th>
<th style="text-align:left">技术选型</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>开发框架</strong></td>
<td style="text-align:left">Qt 6.6.3 (C++)</td>
<td style="text-align:left">跨平台 GUI 框架，利用信号槽机制实现模块解耦。</td>
</tr>
<tr>
<td style="text-align:left"><strong>网络协议</strong></td>
<td style="text-align:left">TCP / HTTP</td>
<td style="text-align:left"><code>QTcpSocket</code> 实现 SeedLink 协议；<code>QNetworkAccessManager</code> 实现 FDSN REST API 请求。</td>
</tr>
<tr>
<td style="text-align:left"><strong>数据解析</strong></td>
<td style="text-align:left">libmseed v3</td>
<td style="text-align:left">行业标准库，用于解析 Mini-SEED 格式及 Steim-2 压缩数据。</td>
</tr>
<tr>
<td style="text-align:left"><strong>绘图引擎</strong></td>
<td style="text-align:left">QCustomPlot 2.1</td>
<td style="text-align:left">定制化的高性能 2D 绘图库，支持 GPU 加速和图层管理。</td>
</tr>
<tr>
<td style="text-align:left"><strong>地图引擎</strong></td>
<td style="text-align:left">Qt Location / QML</td>
<td style="text-align:left">利用 OpenGL 硬件加速渲染地图瓦片和海量标记点。</td>
</tr>
<tr>
<td style="text-align:left"><strong>数据结构</strong></td>
<td style="text-align:left">哈希表 (QHash)</td>
<td style="text-align:left">优化台站查找算法，将地图交互的时间复杂度从 O(N) 降至 O(1)。</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="5-快速操作指南-Quick-Start"><a href="#5-快速操作指南-Quick-Start" class="headerlink" title="5. 快速操作指南 (Quick Start)"></a>5. 快速操作指南 (Quick Start)</h2><ol>
<li><strong>启动连接</strong>：<ul>
<li>在顶部工具栏选择服务器（如 “GEOFON”）。</li>
<li>点击 <strong>“Get Stations”</strong> 获取可用台站列表。</li>
<li>在下拉框中选择一个台站（或在地图上点击绿色三角形）。</li>
<li>点击 <strong>“Start Stream”</strong> 开始接收数据。</li>
</ul>
</li>
<li><strong>调整视图</strong>：<ul>
<li>使用底部 <strong>“View Settings”</strong> 面板切换颜色主题或隐藏不需要的分量。</li>
<li>使用 <strong>“Amplitude Scale”</strong> 调整波形振幅显示范围。</li>
</ul>
</li>
<li><strong>信号处理</strong>：<ul>
<li>在 <strong>“Signal Processing”</strong> 面板中，勾选 <strong>“Demean”</strong> 去除基线漂移。</li>
<li>选择 <strong>“Bandpass”</strong>，设置频率为 <code>0.1</code> - <code>5.0</code> Hz，点击 <strong>“Apply”</strong> 以滤除噪声。</li>
</ul>
</li>
<li><strong>设置预警</strong>：<ul>
<li>在 <strong>“Event Trigger”</strong> 面板设置 <code>ON=4.0</code>, <code>OFF=1.5</code>。</li>
<li>点击 <strong>“Set Trigger”</strong>。当地震发生时，系统将自动画红线并报警。</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>技术项目</category>
      </categories>
      <tags>
        <tag>SeisMonitor</tag>
        <tag>C++</tag>
        <tag>seedlink</tag>
        <tag>地震台站</tag>
        <tag>信号监测</tag>
        <tag>数据处理</tag>
        <tag>数据分析</tag>
        <tag>数据可视化</tag>
      </tags>
  </entry>
  <entry>
    <title>基于C++、omp并行计算的数字信号处理工具箱——SignalProcessingUtils</title>
    <url>/2026/01/17/SignalProcessingUtils/</url>
    <content><![CDATA[<h1 id="基于C-、omp并行的信号处理工具箱——SignalProcessingUtils"><a href="#基于C-、omp并行的信号处理工具箱——SignalProcessingUtils" class="headerlink" title="基于C++、omp并行的信号处理工具箱——SignalProcessingUtils"></a>基于C++、omp并行的信号处理工具箱——SignalProcessingUtils</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><strong>SignalProcessingUtils</strong> 是一个用C++编写的高性能数字信号处理工具箱，集成了多种时频分析方法，包括短时傅里叶变换（STFT）、S变换和连续小波变换（CWT）。该工具箱利用OpenMP实现并行计算，显著提升了大规模数据处理的效率，适用于地震信号处理、语音分析和其他需要时频分析的领域。</p>
<span id="more"></span>
<h2 id="示例图片"><a href="#示例图片" class="headerlink" title="示例图片"></a>示例图片</h2><p><strong>变换示例选取部分数据，使用Qcustomplot绘制STFT短时傅里叶变换</strong><br><img src="时频分析_短时傅里叶变换.png" alt="变换示例-STFT短时傅里叶变换"><br><strong>合成信号Components: 10Hz, 50Hz, 100Hz, 200Hz-STFT短时傅里叶变换</strong><br><img src="时频分析_短时傅里叶变换2.png" alt="变换示例-STFT短时傅里叶变换2"></p>
<p><strong>变换示例-S变换</strong><br><img src="时频分析_S变换.png" alt="变换示例-S变换"></p>
<p><strong>变换示例-CWT连续小波变换</strong><br><img src="时频分析_CWT.png" alt="变换示例-CWT连续小波变换"></p>
<h2 id="代码分享"><a href="#代码分享" class="headerlink" title="代码分享"></a>代码分享</h2><p><strong>STFT代码</strong><br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//数据处理函数 STFT变换</span></span><br><span class="line"><span class="comment">// STFT变换</span></span><br><span class="line">std::vector&lt;std::vector&lt;<span class="type">double</span>&gt;&gt; <span class="built_in">stft_fft</span>(</span><br><span class="line">	<span class="type">const</span> std::vector&lt;<span class="type">double</span>&gt;&amp; x,</span><br><span class="line">	<span class="type">double</span> fs,</span><br><span class="line">	<span class="type">int</span> winSize,</span><br><span class="line">	<span class="type">int</span> hop,</span><br><span class="line">	<span class="type">int</span> nfft)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> N = (<span class="type">int</span>)x.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 自动修正 nfft，必须大于等于 winSize 且通常为 2 的幂</span></span><br><span class="line">	<span class="keyword">if</span> (nfft &lt; winSize) nfft = winSize;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 基础参数检查</span></span><br><span class="line">	<span class="keyword">if</span> (N &lt; winSize || hop &lt;= <span class="number">0</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> nFrames = (N - winSize) / hop + <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> nFreq = nfft / <span class="number">2</span> + <span class="number">1</span>; <span class="comment">// 单边谱 (0 到 fs/2)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 结果矩阵：[频率行][时间列]</span></span><br><span class="line">	std::vector&lt;std::vector&lt;<span class="type">double</span>&gt;&gt; <span class="built_in">spec</span>(</span><br><span class="line">		nFreq, std::<span class="built_in">vector</span>&lt;<span class="type">double</span>&gt;(nFrames, <span class="number">0.0</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 1. 生成汉宁窗 (Hann Window)</span></span><br><span class="line">	<span class="function">std::vector&lt;<span class="type">double</span>&gt; <span class="title">win</span><span class="params">(winSize)</span></span>;</span><br><span class="line">	<span class="type">double</span> winSumSq = <span class="number">0.0</span>; <span class="comment">// 用于能量归一化</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; winSize; ++i) &#123;</span><br><span class="line">		win[i] = <span class="number">0.5</span> * (<span class="number">1.0</span> - std::<span class="built_in">cos</span>(<span class="number">2.0</span> * M_PI * i / (winSize - <span class="number">1</span>)));</span><br><span class="line">		winSumSq += win[i] * win[i];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 2. 归一化系数 (Amplitude Spectrum)</span></span><br><span class="line">	<span class="comment">// 如果想要功率谱密度(PSD)，系数计算方式不同。这里按幅度谱计算方便可视化。</span></span><br><span class="line">	<span class="comment">// 对于加窗信号，恢复幅值通常除以 sum(win)/2 或者 sqrt(sum(win^2))</span></span><br><span class="line">	<span class="comment">// 这里使用简单的幅值恢复，使得正弦波峰值接近真实振幅</span></span><br><span class="line">	<span class="type">double</span> scale = <span class="number">1.0</span>;</span><br><span class="line">	<span class="type">double</span> winSum = <span class="number">0.0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">double</span> w : win) winSum += w;</span><br><span class="line">	<span class="keyword">if</span> (winSum &gt; <span class="number">0</span>) scale = <span class="number">2.0</span> / winSum;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// OpenMP 并行计算</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp parallel</span></span><br><span class="line">	&#123;</span><br><span class="line">		Eigen::FFT&lt;<span class="type">double</span>&gt; fft;</span><br><span class="line">		std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt; <span class="built_in">timeBuf</span>(nfft);</span><br><span class="line">		std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt; <span class="built_in">freqBuf</span>(nfft);</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp for schedule(static)</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nFrames; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> pos = i * hop;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 填充数据并加窗</span></span><br><span class="line">			std::<span class="built_in">fill</span>(timeBuf.<span class="built_in">begin</span>(), timeBuf.<span class="built_in">end</span>(), std::<span class="built_in">complex</span>&lt;<span class="type">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; winSize; ++j) &#123;</span><br><span class="line">				<span class="keyword">if</span> (pos + j &lt; N) &#123;</span><br><span class="line">					timeBuf[j] = x[pos + j] * win[j];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 执行 FFT</span></span><br><span class="line">			fft.<span class="built_in">fwd</span>(freqBuf, timeBuf);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 计算幅值 (取前 nFreq 个点)</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; nFreq; ++k)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="type">double</span> mag = std::<span class="built_in">abs</span>(freqBuf[k]) * scale;</span><br><span class="line">				spec[k][i] = mag; <span class="comment">// 这里存幅值，如果颜色太暗可以在绘图时取对数</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> spec;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>S变换代码</strong><br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//数据处理函数 S变换</span></span><br><span class="line">std::vector&lt;std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt;&gt; <span class="built_in">st_transform</span>(</span><br><span class="line">	<span class="type">const</span> std::vector&lt;<span class="type">double</span>&gt;&amp; t,</span><br><span class="line">	<span class="type">const</span> std::vector&lt;<span class="type">double</span>&gt;&amp; Sig,</span><br><span class="line">	<span class="type">double</span> freqlow, <span class="type">double</span> freqhigh, <span class="type">double</span> alpha)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">double</span> PI = <span class="number">3.14159265358979323846</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 1. 基础参数计算</span></span><br><span class="line">	<span class="type">int</span> nLevel = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;((freqhigh - freqlow) / alpha) + <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> TimeLen = t.<span class="built_in">size</span>();</span><br><span class="line">	<span class="keyword">if</span> (TimeLen == <span class="number">0</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="type">double</span> dt = t[<span class="number">1</span>] - t[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 2. 预分配结果矩阵 (避免 push_back)</span></span><br><span class="line">	<span class="comment">// wcoefs[freq_index][time_index]</span></span><br><span class="line">	std::vector&lt;std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt;&gt; <span class="built_in">wcoefs</span>(nLevel);</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> processed_count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 4. OpenMP 并行计算</span></span><br><span class="line">	<span class="comment">// shared: 共享变量, private: 私有变量</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp parallel for schedule(dynamic)</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> m = <span class="number">0</span>; m &lt; nLevel; ++m) &#123;</span><br><span class="line">		<span class="comment">// 每个线程分配内存</span></span><br><span class="line">		wcoefs[m].<span class="built_in">resize</span>(TimeLen);</span><br><span class="line"></span><br><span class="line">		<span class="type">double</span> f = freqlow + m * alpha;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 避免 f=0 导致除零 (S变换中 f=0 通常处理为直流分量或跳过)</span></span><br><span class="line">		<span class="keyword">if</span> (std::<span class="built_in">abs</span>(f) &lt; <span class="number">1e-6</span>) f = <span class="number">1e-6</span>;</span><br><span class="line"></span><br><span class="line">		<span class="type">double</span> sigma_f = <span class="number">1.0</span> / std::<span class="built_in">abs</span>(f);</span><br><span class="line">		<span class="type">double</span> factor = <span class="number">1.0</span> / (<span class="built_in">sqrt</span>(<span class="number">2</span> * PI) * sigma_f);</span><br><span class="line">		<span class="type">double</span> sigma_sq_inv = <span class="number">1.0</span> / (sigma_f * sigma_f); <span class="comment">// 预计算 1/sigma^2</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 时间平移循环 (tau) - 对应 n</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp parallel for schedule(dynamic)</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> n = <span class="number">0</span>; n &lt; TimeLen; ++n) &#123;</span><br><span class="line">			<span class="function">std::complex&lt;<span class="type">double</span>&gt; <span class="title">sum</span><span class="params">(<span class="number">0.0</span>, <span class="number">0.0</span>)</span></span>;</span><br><span class="line">			<span class="type">double</span> tau = t[n]; <span class="comment">// 当前平移时间</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">// 积分循环 (t) - 对应 k</span></span><br><span class="line">			<span class="comment">// 注意：这种直接卷积是 O(N^2)，数据量大时仍较慢，FFT方法是 O(NlogN)</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; TimeLen; ++k) &#123;</span><br><span class="line">				<span class="type">double</span> time_diff = tau - t[k]; <span class="comment">// (tau - t) 或 (n*dt - t[k])</span></span><br><span class="line"></span><br><span class="line">				<span class="comment">// 高斯窗部分</span></span><br><span class="line">				<span class="type">double</span> exponent = <span class="number">-0.5</span> * (time_diff * time_diff) * sigma_sq_inv;</span><br><span class="line">				<span class="comment">// 如果 exponent 太小，exp 接近0，可以剪枝优化</span></span><br><span class="line">				<span class="keyword">if</span> (exponent &lt; <span class="number">-10.0</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">				<span class="type">double</span> gauss_val = factor * std::<span class="built_in">exp</span>(exponent);</span><br><span class="line"></span><br><span class="line">				<span class="comment">// 复指数部分 e^(-i * 2 * PI * f * t[k])</span></span><br><span class="line">				<span class="type">double</span> phase = <span class="number">-2</span> * PI * f * t[k];</span><br><span class="line"></span><br><span class="line">				<span class="comment">// 欧拉公式: exp(ix) = cos(x) + i*sin(x)</span></span><br><span class="line">				<span class="function">std::complex&lt;<span class="type">double</span>&gt; <span class="title">complex_exp</span><span class="params">(std::cos(phase), std::sin(phase))</span></span>;</span><br><span class="line"></span><br><span class="line">				sum += Sig[k] * gauss_val * complex_exp;</span><br><span class="line">			&#125;</span><br><span class="line">			wcoefs[m][n] = sum * dt;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> wcoefs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>CWT代码</strong><br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 连续小波变换 (CWT) - 基于 Morlet 小波</span></span><br><span class="line"><span class="comment"> * @param sig 输入信号</span></span><br><span class="line"><span class="comment"> * @param fs 采样率</span></span><br><span class="line"><span class="comment"> * @param f_min 最小分析频率</span></span><br><span class="line"><span class="comment"> * @param f_max 最大分析频率</span></span><br><span class="line"><span class="comment"> * @param num_freqs 频率点数 (决定纵轴分辨率)</span></span><br><span class="line"><span class="comment"> * @param omega0 Morlet 参数 (通常取 6.0, 类似地震子波)</span></span><br><span class="line"><span class="comment"> * @return 结果矩阵 [频率行][时间列] (复数结果)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">std::vector&lt;std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt;&gt; <span class="built_in">cwt_morlet</span>(</span><br><span class="line">	<span class="type">const</span> std::vector&lt;<span class="type">double</span>&gt;&amp; sig,</span><br><span class="line">	<span class="type">double</span> fs,</span><br><span class="line">	<span class="type">double</span> f_min,</span><br><span class="line">	<span class="type">double</span> f_max,</span><br><span class="line">	<span class="type">int</span> num_freqs,</span><br><span class="line">	<span class="type">double</span> omega0 = <span class="number">6.0</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> n = sig.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 1. 为了消除循环卷积的边缘效应，进行补零到 2 的幂次 (Next Power of 2)</span></span><br><span class="line">	<span class="type">int</span> n_padded = std::<span class="built_in">pow</span>(<span class="number">2</span>, std::<span class="built_in">ceil</span>(std::<span class="built_in">log2</span>(n)));</span><br><span class="line">	<span class="comment">// 如果数据太短，至少补到一定长度</span></span><br><span class="line">	<span class="keyword">if</span> (n_padded &lt; <span class="number">2</span> * n) n_padded *= <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 2. 预计算信号的 FFT</span></span><br><span class="line">	Eigen::FFT&lt;<span class="type">double</span>&gt; fft;</span><br><span class="line">	std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt; <span class="built_in">sig_padded</span>(n_padded, <span class="number">0.0</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) sig_padded[i] = sig[i];</span><br><span class="line"></span><br><span class="line">	std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt; sig_fft;</span><br><span class="line">	fft.<span class="built_in">fwd</span>(sig_fft, sig_padded);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 3. 构建角频率轴 (Angular Frequency Axis)</span></span><br><span class="line">	<span class="comment">// 对应 FFT 的频率分布: [0, 1, ..., N/2, -N/2+1, ..., -1] * (2*pi*fs/N)</span></span><br><span class="line">	<span class="function">std::vector&lt;<span class="type">double</span>&gt; <span class="title">omega</span><span class="params">(n_padded)</span></span>;</span><br><span class="line">	<span class="type">double</span> dw = <span class="number">2.0</span> * M_PI * fs / n_padded;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n_padded; ++i) &#123;</span><br><span class="line">		<span class="keyword">if</span> (i &lt;= n_padded / <span class="number">2</span>)</span><br><span class="line">			omega[i] = i * dw;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			omega[i] = (i - n_padded) * dw;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 4. 准备结果矩阵</span></span><br><span class="line">	std::vector&lt;std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt;&gt; <span class="built_in">cwt_matrix</span>(num_freqs);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 5. 并行循环计算每个尺度的 CWT</span></span><br><span class="line">	<span class="comment">// 我们按照线性频率分布来计算，这样画图时纵轴是线性的</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp parallel for schedule(dynamic)</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num_freqs; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 当前分析频率</span></span><br><span class="line">		<span class="type">double</span> f = f_min + i * (f_max - f_min) / (num_freqs - <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">if</span> (f &lt;= <span class="number">1e-6</span>) f = <span class="number">1e-6</span>; <span class="comment">// 保护</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 将频率转换为尺度 (Scale)</span></span><br><span class="line">		<span class="comment">// 对于 Morlet (omega0=6), scale = (omega0 + sqrt(2 + omega0^2)) / (4 * pi * f) </span></span><br><span class="line">		<span class="comment">// 简化近似公式: scale = omega0 / (2 * pi * f)</span></span><br><span class="line">		<span class="type">double</span> scale = omega0 / (<span class="number">2.0</span> * M_PI * f);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 构造 Morlet 小波的频域响应 (Analytical Morlet)</span></span><br><span class="line">		<span class="comment">// Psi_hat(w) = pi^0.25 * sqrt(2*s) * exp(-0.5 * (s*w - w0)^2) * step(w)</span></span><br><span class="line">		<span class="comment">// 注意：CWT 定义为 IFFT( X(w) * sqrt(s) * Psi_hat*(s*w) )</span></span><br><span class="line">		<span class="comment">// 为了保持能量守恒或幅度物理意义，归一化系数会有所不同。</span></span><br><span class="line">		<span class="comment">// 这里使用幅度归一化，使得正弦波的 CWT 幅值接近真实幅值。</span></span><br><span class="line"></span><br><span class="line">		std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt; <span class="built_in">wavelet_fft</span>(n_padded, <span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">		<span class="type">double</span> norm_factor = std::<span class="built_in">pow</span>(M_PI, <span class="number">0.25</span>) * std::<span class="built_in">sqrt</span>(<span class="number">2.0</span> * scale); <span class="comment">// 标准因子</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; n_padded; ++k)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// Analytic Wavelet 只有正频率部分</span></span><br><span class="line">			<span class="keyword">if</span> (k &gt; <span class="number">0</span> &amp;&amp; k &lt; n_padded / <span class="number">2</span> + <span class="number">1</span>) <span class="comment">// omega[k] &gt; 0</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="type">double</span> sw = scale * omega[k];</span><br><span class="line">				<span class="type">double</span> exponent = <span class="number">-0.5</span> * std::<span class="built_in">pow</span>(sw - omega0, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">				<span class="comment">// 优化：太小的指数直接忽略</span></span><br><span class="line">				<span class="keyword">if</span> (exponent &gt; <span class="number">-20.0</span>) &#123;</span><br><span class="line">					<span class="comment">// 频域乘法: Signal_FFT * Wavelet_FFT</span></span><br><span class="line">					<span class="comment">// 乘以 (2/fs) 甚至更多是为了幅值恢复，这里先算标准定义</span></span><br><span class="line">					wavelet_fft[k] = sig_fft[k] * std::<span class="built_in">exp</span>(exponent);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// IFFT 变换回时域</span></span><br><span class="line">		std::vector&lt;std::complex&lt;<span class="type">double</span>&gt;&gt; time_domain_out;</span><br><span class="line">		fft.<span class="built_in">inv</span>(time_domain_out, wavelet_fft);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 截取原始长度并归一化</span></span><br><span class="line">		cwt_matrix[i].<span class="built_in">resize</span>(n);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 经验归一化系数，使得幅值看起来物理意义更强</span></span><br><span class="line">		<span class="comment">// CWT 的幅值物理意义比较复杂，通常看相对值</span></span><br><span class="line">		<span class="type">double</span> output_scale = std::<span class="built_in">sqrt</span>(scale) * (dw / std::<span class="built_in">sqrt</span>(<span class="number">2</span> * M_PI));</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> t = <span class="number">0</span>; t &lt; n; ++t) &#123;</span><br><span class="line">			cwt_matrix[i][t] = time_domain_out[t] * output_scale;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> cwt_matrix;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>信号处理</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>SignalProcessing</tag>
        <tag>S-Transform</tag>
        <tag>FFT</tag>
        <tag>时频分析</tag>
      </tags>
  </entry>
  <entry>
    <title>基于QT、VTK的三维数据可视化模块</title>
    <url>/2026/01/18/VTK%E4%B8%89%E7%BB%B4%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<h1 id="VTK三维数据可视化模块说明文档"><a href="#VTK三维数据可视化模块说明文档" class="headerlink" title="VTK三维数据可视化模块说明文档"></a>VTK三维数据可视化模块说明文档</h1><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>基于 <strong>Qt</strong>、<strong>VTK</strong> 的三维数据可视化模块，提供了一个高性能的交互式三维渲染窗口，专门用于展示地质勘探、气象数据及通用科学计算数据。</p>
<span id="more"></span>
<h1 id="界面展示"><a href="#界面展示" class="headerlink" title="界面展示"></a>界面展示</h1><p><strong>程序主页</strong><br><img src="程序主页.png" alt="程序主页"><br><strong>初始界面</strong><br><img src="初始界面.png" alt="初始界面"><br><strong>起伏地表模型</strong><br><img src="起伏地表模型.png" alt="起伏地表模型"><br><strong>起伏地表模型规则化显示</strong><br><img src="起伏地表模型规则化显示.png" alt="起伏地表模型规则化显示"><br><strong>参数调整面板</strong><br><img src="参数调整面板_色标.png" alt="参数调整面板"><br><strong>速度模型</strong><br><img src="速度模型.png" alt="速度模型"><br><strong>速度模型阈值显示1</strong><br><img src="速度模型阈值显示1.png" alt="速度模型阈值显示1"><br><strong>速度模型阈值显示2</strong><br><img src="速度模型阈值显示2.png" alt="速度模型阈值显示2"><br><strong>速度模型阈值显示3</strong><br><img src="速度模型阈值显示3.png" alt="速度模型阈值显示3"></p>
<p><strong>任意切片显示</strong><br><img src="任意切片显示.png" alt="任意切片显示"><br><strong>多切片显示3</strong><br><img src="多切片显示3.png" alt="多切片显示3"></p>
<h2 id="1-模块概述-Overview"><a href="#1-模块概述-Overview" class="headerlink" title="1. 模块概述 (Overview)"></a>1. 模块概述 (Overview)</h2><p>本模块是 <strong>Qt_VTK</strong> 系统的核心组件，基于 <strong>VTK 9.3</strong> 构建。它提供了一个高性能的交互式三维渲染窗口，专门用于展示地质勘探、气象数据及通用科学计算数据。</p>
<p>主要能力包括：</p>
<ul>
<li><strong>多源数据解析</strong>：支持点云、规则网格、非结构化网格及显式结构化网格 (ESG)。</li>
<li><strong>体数据渲染</strong>：支持标量映射、阈值过滤及透明度控制。</li>
<li><strong>切片分析</strong>：提供交互式三轴切片和任意平面切割功能。</li>
<li><strong>场景交互</strong>：支持标准的鼠标交互、相机控制及辅助坐标显示。</li>
</ul>
<hr>
<h2 id="2-界面布局-Interface-Layout"><a href="#2-界面布局-Interface-Layout" class="headerlink" title="2. 界面布局 (Interface Layout)"></a>2. 界面布局 (Interface Layout)</h2><p>可视化窗口主要由以下几个部分组成：</p>
<ol>
<li><p><strong>3D 渲染主视图 (Main Viewport)</strong>：</p>
<ul>
<li>占据窗口核心区域，显示三维模型。</li>
<li><strong>左下角</strong>：固定坐标轴指示器 (Orientation Marker)，指示全局 XYZ 方向。</li>
<li><strong>右上角</strong>：交互式相机导航器 (Camera Cube)，点击不同面可快速切换视角（如 Top, Front, Left）。</li>
<li><strong>右侧</strong>：颜色标尺 (Scalar Bar)，显示数值与颜色的对应关系。</li>
</ul>
</li>
<li><p><strong>顶部工具栏 (Toolbar)</strong>：</p>
<ul>
<li><code>打开文件</code>：加载数据文件。</li>
<li><code>参数面板</code>：开启/隐藏侧边控制面板。</li>
<li><code>视图</code>：切换透视/正交投影，或复位视角。</li>
<li><code>保存</code>：截图保存当前渲染画面。</li>
<li><code>帮助</code>：显示操作说明。</li>
</ul>
</li>
<li><p><strong>底部状态栏 (Status Bar)</strong>：</p>
<ul>
<li>实时显示当前操作状态、加载进度及错误提示。</li>
</ul>
</li>
</ol>
<hr>
<h2 id="3-操作指南-User-Guide"><a href="#3-操作指南-User-Guide" class="headerlink" title="3. 操作指南 (User Guide)"></a>3. 操作指南 (User Guide)</h2><h3 id="3-1-鼠标交互"><a href="#3-1-鼠标交互" class="headerlink" title="3.1 鼠标交互"></a>3.1 鼠标交互</h3><ul>
<li><strong>左键拖拽</strong>：旋转模型 (Rotate)。</li>
<li><strong>中键拖拽</strong> / <strong>Shift + 左键</strong>：平移模型 (Pan)。</li>
<li><strong>右键拖拽</strong> / <strong>滚轮滚动</strong>：缩放模型 (Zoom)。</li>
<li><strong>Ctrl + 左键</strong>：在切片模式下，用于旋转切片平面（视具体 Widget 而定）。</li>
</ul>
<h3 id="3-2-右键菜单-Context-Menu"><a href="#3-2-右键菜单-Context-Menu" class="headerlink" title="3.2 右键菜单 (Context Menu)"></a>3.2 右键菜单 (Context Menu)</h3><p>在渲染区域点击右键，可弹出快捷菜单：</p>
<ul>
<li><strong>Color Settings</strong>：快速切换背景颜色或重置颜色映射。</li>
<li><strong>Toggle 2D Plane</strong>：显示/隐藏底部的基础参考网格。</li>
<li><strong>Scale Z</strong>：快速反转 Z 轴（针对某些深度为正的地质数据）。</li>
<li><strong>Clear Object</strong>：清空当前场景。</li>
</ul>
<hr>
<h2 id="4-参数调整面板-Parameter-Panel"><a href="#4-参数调整面板-Parameter-Panel" class="headerlink" title="4. 参数调整面板 (Parameter Panel)"></a>4. 参数调整面板 (Parameter Panel)</h2><p>点击工具栏的 <strong>“参数面板”</strong> 按钮可打开侧边栏，包含四个核心选项卡：</p>
<h3 id="4-1-缩放调整-Scale-amp-Camera"><a href="#4-1-缩放调整-Scale-amp-Camera" class="headerlink" title="4.1 缩放调整 (Scale &amp; Camera)"></a>4.1 缩放调整 (Scale &amp; Camera)</h3><p>用于处理地质数据中常见的 <strong>Z 轴压缩</strong> 问题。</p>
<ul>
<li><strong>Model Scale (X/Y/Z)</strong>：设置各轴的缩放比例。<ul>
<li><em>应用场景</em>：地质数据的水平跨度通常为几千米，而深度只有几百米。将 Z 轴 Scale 设为 5.0 或 10.0 可夸张显示深度变化。</li>
</ul>
</li>
<li><strong>Camera ViewUp</strong>：手动设置相机的“向上”向量，用于修正视角倾斜。</li>
</ul>
<h3 id="4-2-颜色调整-Color-Adjustment"><a href="#4-2-颜色调整-Color-Adjustment" class="headerlink" title="4.2 颜色调整 (Color Adjustment)"></a>4.2 颜色调整 (Color Adjustment)</h3><p>控制数值到颜色的映射关系。</p>
<ul>
<li><strong>Scalar Range (Min/Max)</strong>：设置颜色映射的数值范围。<ul>
<li>超出范围的数值将被钳位到两端颜色。</li>
</ul>
</li>
<li><strong>Hue Range</strong>：调整色相范围（默认从蓝色到红色）。</li>
<li><strong>Global Opacity</strong>：调整整个网格的透明度（0~100%）。</li>
<li><strong>Color Presets</strong>：右侧提供预设颜色表（如 <code>Rainbow</code>, <code>Jet</code>, <code>Seismic</code> 等），支持加载 <code>.cpt</code> 文件。</li>
</ul>
<h3 id="4-3-对象显示-Object-Display"><a href="#4-3-对象显示-Object-Display" class="headerlink" title="4.3 对象显示 (Object Display)"></a>4.3 对象显示 (Object Display)</h3><p>控制不同渲染图元的可见性。</p>
<ul>
<li><strong>Point Cloud</strong>：以离散点形式显示数据。</li>
<li><strong>Outline</strong>：显示数据的外包围盒（Bounding Box）。</li>
<li><strong>Cube Axes</strong>：显示带刻度的三维坐标轴网格。</li>
<li><strong>Grid Options</strong>：<ul>
<li><code>Cell &lt;-&gt; Point</code>：切换渲染模式。<strong>Cell 模式</strong>显示原始网格格子（马赛克感）；<strong>Point 模式</strong>进行平滑插值渲染。</li>
<li><code>Edge Line</code>：显示/隐藏网格单元的边缘线。</li>
<li><code>Threshold</code>：开启阈值过滤，只显示特定数值范围内的数据（如只显示高波速区域）。</li>
</ul>
</li>
</ul>
<h3 id="4-4-切片显示-Slicing"><a href="#4-4-切片显示-Slicing" class="headerlink" title="4.4 切片显示 (Slicing)"></a>4.4 切片显示 (Slicing)</h3><p>提供三种切片模式用于查看体数据内部：</p>
<ol>
<li><strong>任意切片 (Arbitrary Slice)</strong>：<ul>
<li>输入 <code>Origin</code> (原点) 和 <code>Normal</code> (法线方向)，点击 Add 生成切片。</li>
</ul>
</li>
<li><strong>三轴交互切片 (Tri-axial Slice)</strong>：<ul>
<li>勾选 <code>clip-plane-X/Y/Z</code>，场景中会出现交互式平面。</li>
<li>鼠标拖动平面边框可移动切片位置。</li>
</ul>
</li>
<li><strong>多重切片 (Multi-Slice)</strong>：<ul>
<li>设定切片数量（如 10 层），点击 <code>Show</code>，自动沿指定轴向生成等间距切片组。</li>
</ul>
</li>
</ol>
<hr>
<h2 id="5-支持的数据格式-Supported-Data-Formats"><a href="#5-支持的数据格式-Supported-Data-Formats" class="headerlink" title="5. 支持的数据格式 (Supported Data Formats)"></a>5. 支持的数据格式 (Supported Data Formats)</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">后缀名</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>.xyzv</strong></td>
<td style="text-align:left">自定义网格</td>
<td style="text-align:left">文本格式。前4行头信息，第5行维度(Nx Ny Nz Nv)，后续为 <code>x y z value</code> 数据。程序会自动构建显式结构化网格。</td>
</tr>
<tr>
<td style="text-align:left"><strong>.vtk</strong></td>
<td style="text-align:left">VTK Legacy</td>
<td style="text-align:left">标准 VTK 格式，支持 StructuredPoints, PolyData, UnstructuredGrid。</td>
</tr>
<tr>
<td style="text-align:left"><strong>.ply</strong></td>
<td style="text-align:left">多边形文件</td>
<td style="text-align:left">常用于点云或表面网格存储，程序会自动根据 Z 值生成颜色标量。</td>
</tr>
<tr>
<td style="text-align:left"><strong>.dem / .tif</strong></td>
<td style="text-align:left">数字高程</td>
<td style="text-align:left">光栅高程数据，程序会自动转换为地形表面 (PolyData)。</td>
</tr>
<tr>
<td style="text-align:left"><strong>.iter / .txt</strong></td>
<td style="text-align:left">离散点云</td>
<td style="text-align:left">简单的点列表，程序将按点云方式渲染。</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="6-技术实现细节-Technical-Details"><a href="#6-技术实现细节-Technical-Details" class="headerlink" title="6. 技术实现细节 (Technical Details)"></a>6. 技术实现细节 (Technical Details)</h2><h3 id="6-1-渲染管线-Pipeline"><a href="#6-1-渲染管线-Pipeline" class="headerlink" title="6.1 渲染管线 (Pipeline)"></a>6.1 渲染管线 (Pipeline)</h3><p>本模块采用了标准的 VTK 可视化管线设计：<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[Source / Reader] --&gt; B[Filter: Transform]</span><br><span class="line">B --&gt; C&#123;Mode Selection&#125;</span><br><span class="line">C --&gt;|Point Mode| D[Filter: CellDataToPointData]</span><br><span class="line">C --&gt;|Cell Mode| E[Pass Through]</span><br><span class="line">D --&gt; F[Mapper: DataSetMapper]</span><br><span class="line">E --&gt; F</span><br><span class="line">F --&gt;|LookupTable| G[Actor]</span><br><span class="line">G --&gt; H[Renderer]</span><br></pre></td></tr></table></figure></p>
<h3 id="6-2-显式结构化网格-Explicit-Structured-Grid"><a href="#6-2-显式结构化网格-Explicit-Structured-Grid" class="headerlink" title="6.2 显式结构化网格 (Explicit Structured Grid)"></a>6.2 显式结构化网格 (Explicit Structured Grid)</h3><p>对于 <code>.xyzv</code> 数据，系统使用 <code>vtkExplicitStructuredGrid</code> 进行构建。</p>
<ul>
<li><strong>优势</strong>：既保留了结构化网格的拓扑关系（I, J, K 索引），又允许节点在空间中任意分布（非正交、起伏地表）。</li>
<li><strong>实现</strong>：通过 <code>GridUtils::CreateExplicitStructuredGrid</code> 算法，将一维的数据数组映射为三维的六面体（Hexahedron）单元集合。</li>
</ul>
<h3 id="6-3-内存与性能管理"><a href="#6-3-内存与性能管理" class="headerlink" title="6.3 内存与性能管理"></a>6.3 内存与性能管理</h3><ul>
<li><strong>懒加载 (Lazy Initialization)</strong>：参数面板、辅助窗口及大型 Filter 仅在首次使用时创建，减少启动内存占用。</li>
<li><strong>智能指针</strong>：全面使用 <code>vtkSmartPointer</code> 和 <code>vtkNew</code> 管理 VTK 对象生命周期，防止内存泄漏。</li>
<li><strong>数据复用</strong>：切片操作中使用 <code>SetInputData</code> 而非 <code>SetInputConnection</code> 断开临时 Filter 连接，实现“快照式”切片，防止管线冲突。</li>
</ul>
<hr>
<h2 id="7-常见问题-FAQ"><a href="#7-常见问题-FAQ" class="headerlink" title="7. 常见问题 (FAQ)"></a>7. 常见问题 (FAQ)</h2><p><strong>Q: 打开文件后屏幕是黑的？</strong><br>A: 请尝试以下操作：</p>
<ol>
<li>点击工具栏的 <strong>视图 -&gt; 透视/正交</strong> 切换一下投影方式。</li>
<li>滚动鼠标滚轮缩放，或者按 <code>R</code> 键重置相机 (Reset Camera)。</li>
<li>检查参数面板中 <code>Opacity</code> 是否被设为了 0。</li>
</ol>
<p><strong>Q: 为什么左下角的坐标轴不显示？</strong><br>A: 这通常是因为渲染层级被覆盖。尝试稍微旋转一下视图，或者重新加载一次文件。系统已内置自动修复逻辑，会在场景更新时自动重启 Widget。</p>
<p><strong>Q: .xyzv 文件加载失败？</strong><br>A: 请检查文件头是否符合格式要求（前4行跳过，第5行为维度信息）。确保路径中不包含乱码字符（虽然程序已支持中文路径，但部分系统环境可能仍有兼容性问题）。</p>
]]></content>
      <categories>
        <category>技术项目</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>三维数据可视化</tag>
        <tag>VTK</tag>
        <tag>Qt</tag>
      </tags>
  </entry>
  <entry>
    <title>基于 GPU 原生架构的高性能二维弹性波动力学模拟平台</title>
    <url>/2026/01/21/GPU%E6%B3%A2%E5%9C%BA%E6%A8%A1%E6%8B%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/</url>
    <content><![CDATA[<h1 id="HPEW-Sim-v3-0-High-Performance-Elastic-Wave-Simulator"><a href="#HPEW-Sim-v3-0-High-Performance-Elastic-Wave-Simulator" class="headerlink" title="HPEW-Sim v3.0: High-Performance Elastic Wave Simulator"></a>HPEW-Sim v3.0: High-Performance Elastic Wave Simulator</h1><h2 id="基于-GPU-Compute-Shader-的高阶精度弹性波场模拟与成像系统"><a href="#基于-GPU-Compute-Shader-的高阶精度弹性波场模拟与成像系统" class="headerlink" title="基于 GPU Compute Shader 的高阶精度弹性波场模拟与成像系统"></a>基于 GPU Compute Shader 的高阶精度弹性波场模拟与成像系统</h2><h3 id="摘要-Abstract"><a href="#摘要-Abstract" class="headerlink" title="摘要 (Abstract)"></a>摘要 (Abstract)</h3><p><strong>HPEW-Sim v3.0</strong> 是一款专为计算地球物理学、地震勘探及波动物理教学设计的下一代数值模拟平台。该系统针对传统 CPU 串行计算在处理大规模网格时的性能瓶颈，创新性地采用基于 <strong>OpenGL Compute Shader</strong> 的 <strong>GPU 原生并行架构</strong>，实现了在千万级网格规模(实现了在 <strong>1600 万 (1.6 $\times$ 10^7)</strong> 网格节点规模)下的实时、高精度弹性波场模拟。系统内核集成了空间 8 阶/时间 2 阶交错网格有限差分（FDTD）算法，有效抑制了数值频散。此外，平台融合了逆时偏移（RTM）成像、实时波场分离及艺术化渲染技术，为复杂介质中的波传播研究提供了一站式的高性能解决方案。</p>
<span id="more"></span>
<hr>
<h1 id="界面展示-Interface-Gallery"><a href="#界面展示-Interface-Gallery" class="headerlink" title="界面展示 (Interface Gallery)"></a>界面展示 (Interface Gallery)</h1><p><strong>欢迎页面</strong><br><img src="main.png" alt="欢迎页面"><br><strong>模拟主界面</strong><br><img src="marmousi_model.png" alt="marmousi_model"><br><strong>模拟参数调整面板</strong><br><img src="sim_parmeter.png" alt="sim_parmeter"><br><strong>重采样后 Marmousi 模型显示</strong><br><img src="marmousi_c2.png" alt="marmousi_c2"><br><strong>模拟计算性能展示（NVIDIA GeForce RTX 4060 Laptop GPU）</strong><br><em>512x512 分辨率下帧率超过 2000 FPS，长时模拟无数值频散。</em><br><img src="计算速度测试_512_512.png" alt="计算速度测试_512_512"><br><strong>多尺度模型计算性能对比</strong><br><em>2048x2048 分辨率下稳定 240+ FPS，4096x4096 分辨率下稳定 60+ FPS。</em><br><img src="计算速度测试_对比图.png" alt="计算速度测试_对比图"></p>
<p><strong>内置数据分析模块</strong><br><img src="data_analyse.png" alt="data_analyse"><br><strong>Marmousi 模型波场快照与可视化</strong><br><img src="marmousi_record_vz_snap.png" alt="marmousi_record_vz_snap"><br><strong>Marmousi 模型合成地震记录</strong><br><img src="marmousi_record_vz.png" alt="marmousi_record_vz"><br><strong>不同类型震源激发对比 (主频 100Hz)</strong><br><img src="不同类型震源激发.png" alt="不同类型震源激发"><br><strong>实时交互：鼠标点源激发</strong><br><img src="鼠标连续激发.png" alt="鼠标连续激发"><br><strong>Marmousi 模型正演模拟过程</strong><br><img src="marmousi_model3.png" alt="模拟过程"><br><strong>检波器阵列布设与曲界面模型模拟</strong><br><img src="检波器布设.png" alt="检波器布设"></p>
<hr>
<h2 id="1-核心技术架构-Core-Technology-Architecture"><a href="#1-核心技术架构-Core-Technology-Architecture" class="headerlink" title="1. 核心技术架构 (Core Technology Architecture)"></a>1. 核心技术架构 (Core Technology Architecture)</h2><p>本系统并非简单的数值求解器，而是一个集成了高性能计算（HPC）、交互式建模与科学可视化的综合平台。</p>
<h3 id="1-1-高阶数值离散内核-High-Order-Numerical-Kernel"><a href="#1-1-高阶数值离散内核-High-Order-Numerical-Kernel" class="headerlink" title="1.1 高阶数值离散内核 (High-Order Numerical Kernel)"></a>1.1 高阶数值离散内核 (High-Order Numerical Kernel)</h3><p>为了在有限的计算资源下获得极高的模拟精度，本系统采用了 <strong>高阶交错网格有限差分 (Staggered-Grid FDTD)</strong> 格式：</p>
<ul>
<li><strong>空间离散</strong>：采用 <strong>8 阶精度 (8th-Order)</strong> 中心差分算子。相比传统的 2 阶或 4 阶格式，该算法在长距离波场传播中能将<strong>数值频散 (Numerical Dispersion)</strong> 降至理论极限，显著提升了波形的保真度。</li>
<li><strong>时间推进</strong>：采用 <strong>2 阶精度</strong> 的蛙跳格式 (Leapfrog Integration)，确保了计算的稳定性与效率。</li>
</ul>
<h3 id="1-2-GPU-原生并行加速-GPU-Parallel-Acceleration"><a href="#1-2-GPU-原生并行加速-GPU-Parallel-Acceleration" class="headerlink" title="1.2 GPU 原生并行加速 (GPU Parallel Acceleration)"></a>1.2 GPU 原生并行加速 (GPU Parallel Acceleration)</h3><p>系统底层完全基于 <strong>OpenGL 4.3+ Compute Shader</strong> 构建，充分利用现代显卡的大规模并行算力：</p>
<ul>
<li><strong>细粒度并行</strong>：每个网格节点对应一个 GPU 线程，单帧并行处理能力超过 $10^6$ 个节点。</li>
<li><strong>零拷贝渲染</strong>：物理计算与图形渲染共享显存数据，避免了 CPU-GPU 之间的高延迟数据传输，实现了毫秒级的物理步进与可视化。</li>
</ul>
<h3 id="1-3-全波场物理求解-Full-Wavefield-Physics"><a href="#1-3-全波场物理求解-Full-Wavefield-Physics" class="headerlink" title="1.3 全波场物理求解 (Full-Wavefield Physics)"></a>1.3 全波场物理求解 (Full-Wavefield Physics)</h3><p>求解完整的一阶速度-应力弹性波方程组，支持复杂介质中的多波型耦合传播：</p>
<ul>
<li><strong>纵波 ($V_p$) 与 横波 ($V_s$)</strong> 的独立传播与相互转换。</li>
<li><strong>瑞利面波 (Rayleigh Wave)</strong>：通过精确的<strong>自由表面 (Free Surface)</strong> 边界条件（法向应力归零），准确模拟沿地表传播的面波效应。</li>
<li><strong>CPML 吸收边界</strong>：引入卷积完美匹配层（Convolutional Perfectly Matched Layer），有效消除截断边界的人工反射。</li>
</ul>
<hr>
<h2 id="2-功能模块详解-Functional-Modules"><a href="#2-功能模块详解-Functional-Modules" class="headerlink" title="2. 功能模块详解 (Functional Modules)"></a>2. 功能模块详解 (Functional Modules)</h2><h3 id="2-1-正演模拟与反演成像-Forward-Modeling-amp-RTM"><a href="#2-1-正演模拟与反演成像-Forward-Modeling-amp-RTM" class="headerlink" title="2.1 正演模拟与反演成像 (Forward Modeling &amp; RTM)"></a>2.1 正演模拟与反演成像 (Forward Modeling &amp; RTM)</h3><ul>
<li><strong>复杂介质正演</strong>：支持在层状介质、断层、空洞等复杂地质模型中进行波场传播模拟。</li>
<li><strong>逆时偏移成像 (RTM)</strong>：集成了完整的 RTM 流程，包括正演波场存储、反向传播与互相关成像条件。引入 <strong>拉普拉斯滤波 (Laplacian Filtering)</strong> 技术，有效压制低频噪声，显著提升地下反射结构的成像分辨率。</li>
</ul>
<h3 id="2-2-数据采集与观测系统-Data-Acquisition"><a href="#2-2-数据采集与观测系统-Data-Acquisition" class="headerlink" title="2.2 数据采集与观测系统 (Data Acquisition)"></a>2.2 数据采集与观测系统 (Data Acquisition)</h3><p>内置高精度合成地震记录系统，支持灵活的观测系统设计：</p>
<ul>
<li><strong>自定义阵列</strong>：支持自定义检波器的位置、深度及道数。</li>
<li><strong>工业级导出</strong>：支持生成标准地震剖面，并可导出为 <strong>CSV</strong> 或工业标准 <strong>SEGY</strong> 格式，便于后续处理与分析。</li>
</ul>
<h3 id="2-3-震源系统-Source-System"><a href="#2-3-震源系统-Source-System" class="headerlink" title="2.3 震源系统 (Source System)"></a>2.3 震源系统 (Source System)</h3><ul>
<li><strong>多样化震源</strong>：支持单点脉冲、线性震源、爆炸源及<strong>旋转定向力源 (Tensor Rotation)</strong>，可模拟不同类型的震源机制。</li>
<li><strong>随机微震模拟</strong>：支持在指定区域内生成随机时空的微震事件，用于模拟声发射或诱发地震序列。</li>
</ul>
<hr>
<h2 id="3-可视化与交互设计-Visualization-amp-Interaction"><a href="#3-可视化与交互设计-Visualization-amp-Interaction" class="headerlink" title="3. 可视化与交互设计 (Visualization &amp; Interaction)"></a>3. 可视化与交互设计 (Visualization &amp; Interaction)</h2><h3 id="3-1-多维波场分析"><a href="#3-1-多维波场分析" class="headerlink" title="3.1 多维波场分析"></a>3.1 多维波场分析</h3><p>系统提供了丰富的波场属性查看模式：</p>
<ul>
<li><strong>分量切换</strong>：实时切换显示速度场 ($V<em>x, V_y$) 或应力场 ($\sigma</em>{xx}, \sigma<em>{zz}, \sigma</em>{xz}$)。</li>
<li><strong>波场分离</strong>：基于散度 ($\nabla \cdot \mathbf{v}$) 和旋度 ($\nabla \times \mathbf{v}$) 算子，实时分离并显示纯 P 波与纯 S 波。</li>
<li><strong>频谱分析</strong>：内置实时 FFT 频谱分析模块，用于监测波场的频率成分。</li>
</ul>
<h3 id="3-2-艺术化科学渲染-Scientific-amp-Artistic-Rendering"><a href="#3-2-艺术化科学渲染-Scientific-amp-Artistic-Rendering" class="headerlink" title="3.2 艺术化科学渲染 (Scientific &amp; Artistic Rendering)"></a>3.2 艺术化科学渲染 (Scientific &amp; Artistic Rendering)</h3><p>独创多种渲染模式，兼顾科学性与审美：</p>
<ul>
<li><strong>Magma 热力图</strong>：高对比度显示波场能量分布。</li>
<li><strong>Van Gogh 星空模式</strong>：利用流线与厚涂质感算法，直观展示波前的传播方向与动态流场，具有极高的教学演示价值。</li>
</ul>
<h3 id="3-3-交互式建模-Interactive-Modeling"><a href="#3-3-交互式建模-Interactive-Modeling" class="headerlink" title="3.3 交互式建模 (Interactive Modeling)"></a>3.3 交互式建模 (Interactive Modeling)</h3><p>摒弃了传统的脚本建模方式，提供所见即所得的交互工具：</p>
<ul>
<li><strong>画笔工具</strong>：支持直接在网格上绘制高速岩体、低速流体或反射壁。</li>
<li><strong>参数实时修正</strong>：在模拟运行过程中，可实时修改介质的物理属性 ($V_p, V_s, \rho$)，即时观察波场响应的变化。</li>
</ul>
<hr>
<h2 id="4-系统稳定性保障-System-Stability"><a href="#4-系统稳定性保障-System-Stability" class="headerlink" title="4. 系统稳定性保障 (System Stability)"></a>4. 系统稳定性保障 (System Stability)</h2><p>针对高阶差分算法对时间步长 ($dt$) 的敏感性，系统构建了多重稳定性保障机制：</p>
<ul>
<li><strong>数值溢出检测 (Explosion Detection)</strong>：通过硬件级原子操作实时监控计算结果。</li>
<li><strong>自动熔断机制</strong>：一旦检测到数值发散（NaN 或 Infinity），系统将自动暂停模拟并提示参数修正建议，防止显卡驱动崩溃。</li>
</ul>
<hr>
<h2 id="5-数学原理-Mathematical-Formulation"><a href="#5-数学原理-Mathematical-Formulation" class="headerlink" title="5. 数学原理 (Mathematical Formulation)"></a>5. 数学原理 (Mathematical Formulation)</h2><h3 id="5-1-控制方程"><a href="#5-1-控制方程" class="headerlink" title="5.1 控制方程"></a>5.1 控制方程</h3><p>在二维笛卡尔坐标系 $(x, z)$ 下，弹性波传播遵循以下守恒定律：</p>
<p><strong>A. 运动方程 (Momentum Equations):</strong><br>描述质点加速度与应力梯度的关系：</p>
<script type="math/tex; mode=display">\rho \frac{\partial v_x}{\partial t} = \frac{\partial \sigma_{xx}}{\partial x} + \frac{\partial \sigma_{xz}}{\partial z} + f_x</script><script type="math/tex; mode=display">\rho \frac{\partial v_z}{\partial t} = \frac{\partial \sigma_{xz}}{\partial x} + \frac{\partial \sigma_{zz}}{\partial z} + f_z</script><p><strong>B. 本构方程 (Constitutive Equations):</strong><br>描述应力变化率与应变率（速度梯度）的关系：</p>
<script type="math/tex; mode=display">\frac{\partial \sigma_{xx}}{\partial t} = (\lambda + 2\mu)\frac{\partial v_x}{\partial x} + \lambda\frac{\partial v_z}{\partial z}</script><script type="math/tex; mode=display">\frac{\partial \sigma_{zz}}{\partial t} = \lambda\frac{\partial v_x}{\partial x} + (\lambda + 2\mu)\frac{\partial v_z}{\partial z}</script><script type="math/tex; mode=display">\frac{\partial \sigma_{xz}}{\partial t} = \mu (\frac{\partial v_x}{\partial z} + \frac{\partial v_z}{\partial x})</script><p>其中，$v<em>x, v_z$ 为质点振动速度；$\sigma</em>{xx}, \sigma<em>{zz}, \sigma</em>{xz}$ 为应力张量分量；$\rho$ 为介质密度；$\lambda, \mu$ 为拉梅常数，由纵波速度 $V_p$ 和横波速度 $V_s$ 导出：</p>
<script type="math/tex; mode=display">\mu = \rho V_s^2, \quad \lambda = \rho V_p^2 - 2\mu</script><h3 id="5-2-数值离散方案"><a href="#5-2-数值离散方案" class="headerlink" title="5.2 数值离散方案"></a>5.2 数值离散方案</h3><ol>
<li><strong>网格策略</strong>：采用标准交错网格 (Standard Staggered Grid)，将速度分量定义在网格边中点，应力分量定义在网格中心，天然满足中心差分格式。</li>
<li><strong>空间差分算子</strong>：<script type="math/tex; mode=display">\frac{\partial f}{\partial x} \approx \frac{1}{\Delta x} \sum_{n=1}^{4} C_n [f(x + \frac{2n-1}{2}\Delta x) - f(x - \frac{2n-1}{2}\Delta x)]</script>系数 $C_n$ 经泰勒展开优化，确保在 8 个网格点范围内达到 8 阶精度，极大地减少了数值色散误差。</li>
</ol>
<hr>
<h2 id="6-应用前景-Potential-Applications"><a href="#6-应用前景-Potential-Applications" class="headerlink" title="6. 应用前景 (Potential Applications)"></a>6. 应用前景 (Potential Applications)</h2><ol>
<li><strong>资源勘探 (Resource Exploration)</strong>：<ul>
<li>作为全波形反演 (FWI) 的高效正演算子，生成海量带标签的训练数据。</li>
<li>辅助地震观测系统设计与照明度分析。</li>
</ul>
</li>
<li><strong>地震学研究 (Seismology)</strong>：<ul>
<li>模拟地壳深部结构（如莫霍面、俯冲带）的波场反射与转换特征。</li>
<li>研究复杂地表起伏条件下的瑞利面波传播规律。</li>
</ul>
</li>
<li><strong>无损检测 (NDT)</strong>：<ul>
<li>仿真超声波在混凝土、金属构件中的传播，辅助识别裂缝与空洞缺陷。</li>
</ul>
</li>
<li><strong>科学教育 (Education)</strong>：<ul>
<li>利用其强大的可视化能力，将抽象的波动方程转化为直观的动态图像，用于物理教学与科普展示。</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>学术研究与技术项目</category>
      </categories>
      <tags>
        <tag>Computational Geophysics</tag>
        <tag>Elastic Wave</tag>
        <tag>GPU Computing</tag>
        <tag>FDTD</tag>
        <tag>Visualization</tag>
      </tags>
  </entry>
  <entry>
    <title>基于Qt、C++的Seis_Simulation地震波场模拟软件</title>
    <url>/2026/01/19/Seis-Simulation%E5%9C%B0%E9%9C%87%E6%B3%A2%E5%9C%BA%E6%A8%A1%E6%8B%9F/</url>
    <content><![CDATA[<h1 id="Seis-FDM-Tool-High-Performance-2D-Elastic-Wave-Simulation"><a href="#Seis-FDM-Tool-High-Performance-2D-Elastic-Wave-Simulation" class="headerlink" title="Seis-FDM-Tool: High-Performance 2D Elastic Wave Simulation"></a>Seis-FDM-Tool: High-Performance 2D Elastic Wave Simulation</h1><h1 id="高性能二维弹性波场模拟系统-CPU-技术手册"><a href="#高性能二维弹性波场模拟系统-CPU-技术手册" class="headerlink" title="高性能二维弹性波场模拟系统(CPU)技术手册"></a>高性能二维弹性波场模拟系统(CPU)技术手册</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Seis-FDM-Tool 是一款基于 Qt、C++ 的高性能二维弹性波场模拟软件。它实现了二维各向同性弹性波方程（P-SV波）的高精度数值模拟。<br>该软件结合了 C++17 的高性能计算能力与 Qt 的现代化图形界面，旨在解决传统科学计算程序“交互差、配置难、可视化弱”的痛点。核心计算引擎采用 OpenMP 并行加速和内存扁平化技术，能够在大规模网格下实现近实时的波场模拟。</p>
<span id="more"></span>
<h1 id="界面展示"><a href="#界面展示" class="headerlink" title="界面展示"></a>界面展示</h1><p><strong>程序主页</strong><br><img src="home.png" alt="程序主页"><br><strong>模型参数页面</strong><br><img src="page1.png" alt="模型参数页面"><br><strong>波场输出</strong><br><img src="record_snap_2.png" alt="波场输出"><br><strong>地震记录输出</strong><br><img src="record_vx.png" alt="地震记录输出"></p>
<p><img src="https://img.shields.io/badge/Build-v2.1-blue" alt="Build Status"> <img src="https://img.shields.io/badge/Qt-5.15%2B-green" alt="Qt"> <img src="https://img.shields.io/badge/Parallel-OpenMP-orange" alt="OpenMP"> <img src="https://img.shields.io/badge/Platform-Windows-blue" alt="Platform"></p>
<hr>
<h2 id="1-项目简介-Introduction"><a href="#1-项目简介-Introduction" class="headerlink" title="1. 项目简介 (Introduction)"></a>1. 项目简介 (Introduction)</h2><p><strong>Seis-FDM-Tool</strong> 是一款专为地球物理研究和教学设计的专业级桌面应用程序。它实现了二维各向同性弹性波方程（P-SV波）的高精度数值模拟。</p>
<p>该软件结合了 <strong>C++17</strong> 的高性能计算能力与 <strong>Qt</strong> 的现代化图形界面，旨在解决传统科学计算程序“交互差、配置难、可视化弱”的痛点。核心计算引擎采用 <strong>OpenMP</strong> 并行加速和 <strong>内存扁平化</strong> 技术，能够在大规模网格下实现近实时的波场模拟。</p>
<p><strong>Seis-FDM-Tool</strong> is a professional-grade desktop application for 2D elastic wavefield forward modeling. Built with <strong>C++17</strong> and <strong>Qt</strong>, it combines a modern user interface with a highly optimized Finite Difference Method (FDM) engine, featuring <strong>8th-order spatial accuracy</strong> and advanced boundary conditions.</p>
<hr>
<h2 id="2-理论基础-Theoretical-Background"><a href="#2-理论基础-Theoretical-Background" class="headerlink" title="2. 理论基础 (Theoretical Background)"></a>2. 理论基础 (Theoretical Background)</h2><h3 id="2-1-地震勘探原理"><a href="#2-1-地震勘探原理" class="headerlink" title="2.1 地震勘探原理"></a>2.1 地震勘探原理</h3><p>利用人工激发的地震波在地下介质中传播的规律，推断地下岩层的性质和形态。</p>
<ul>
<li><strong>震源 (Source)</strong>: Ricker 子波，支持集中力源 (Point Force)。</li>
<li><strong>传播 (Propagation)</strong>: 波在非均匀介质中传播，产生反射、折射、转换波。</li>
<li><strong>接收 (Receiver)</strong>: 模拟检波器阵列记录地面质点振动速度 ($v_x, v_z$)。</li>
</ul>
<h3 id="2-2-有限差分法-FDM-核心"><a href="#2-2-有限差分法-FDM-核心" class="headerlink" title="2.2 有限差分法 (FDM) 核心"></a>2.2 有限差分法 (FDM) 核心</h3><p>本程序采用 <strong>交错网格有限差分法 (Staggered-Grid FDM)</strong> 求解速度-应力方程组。</p>
<ul>
<li><strong>波动方程 (P-SV波)</strong>:<script type="math/tex; mode=display">
\begin{cases}
\rho \frac{\partial v_x}{\partial t} = \frac{\partial \sigma_{xx}}{\partial x} + \frac{\partial \sigma_{xz}}{\partial z} \\
\rho \frac{\partial v_z}{\partial t} = \frac{\partial \sigma_{xz}}{\partial x} + \frac{\partial \sigma_{zz}}{\partial z} \\
\frac{\partial \sigma_{xx}}{\partial t} = (\lambda + 2\mu)\frac{\partial v_x}{\partial x} + \lambda\frac{\partial v_z}{\partial z} \\
\frac{\partial \sigma_{zz}}{\partial t} = \lambda\frac{\partial v_x}{\partial x} + (\lambda + 2\mu)\frac{\partial v_z}{\partial z} \\
\frac{\partial \sigma_{xz}}{\partial t} = \mu(\frac{\partial v_x}{\partial z} + \frac{\partial v_z}{\partial x})
\end{cases}</script></li>
<li><strong>离散化精度</strong>: <ul>
<li><strong>空间</strong>: <strong>8阶精度 (8th-Order)</strong>。采用长模板差分算子 (C1~C4)，极大压制数值频散，适用于大网格步长模拟。</li>
<li><strong>时间</strong>: 2阶精度差分 (Leap-frog)。</li>
</ul>
</li>
<li><strong>稳定性</strong>: 需满足 Courant-Friedrichs-Lewy (CFL) 条件：<script type="math/tex; mode=display">\Delta t \le \frac{0.606 \cdot h}{v_{max}}</script></li>
</ul>
<hr>
<h2 id="3-核心技术亮点-Key-Features"><a href="#3-核心技术亮点-Key-Features" class="headerlink" title="3. 核心技术亮点 (Key Features)"></a>3. 核心技术亮点 (Key Features)</h2><h3 id="🚀-高性能计算内核-HPC-Kernel"><a href="#🚀-高性能计算内核-HPC-Kernel" class="headerlink" title="🚀 高性能计算内核 (HPC Kernel)"></a>🚀 高性能计算内核 (HPC Kernel)</h3><ul>
<li><strong>1D Flattening (内存扁平化)</strong>: <ul>
<li>放弃传统的 <code>vector&lt;vector&gt;</code> 二维数组，将所有场变量展平为一维 <code>std::vector</code>。</li>
<li><strong>优势</strong>: 保证内存连续性，最大化 CPU 缓存命中率 (Cache Hit Rate)，消除指针跳转开销。</li>
</ul>
</li>
<li><strong>OpenMP 并行化</strong>:<ul>
<li>核心差分循环采用 <code>#pragma omp parallel for</code> 进行多线程加速。</li>
<li>支持根据 CPU 核心数动态调整并行度，充分利用现代多核处理器的算力。</li>
</ul>
</li>
<li><strong>极速 I/O</strong>:<ul>
<li>自定义二进制格式 (<code>.bin</code>) 存储波场快照，读写速度比文本格式快 50 倍以上。</li>
</ul>
</li>
</ul>
<h3 id="🌊-复杂边界条件-Boundary-Conditions"><a href="#🌊-复杂边界条件-Boundary-Conditions" class="headerlink" title="🌊 复杂边界条件 (Boundary Conditions)"></a>🌊 复杂边界条件 (Boundary Conditions)</h3><ul>
<li><strong>PML (完全匹配层)</strong>: <ul>
<li>实现了基于分裂场 (Split-Field) 的 PML 边界条件，有效吸收来自人工截断边界的反射波。</li>
</ul>
</li>
<li><strong>Free Surface (自由表面)</strong>: <ul>
<li>针对地表模拟，实现了 <strong>应力镜像法 (Stress Image Method)</strong>。</li>
<li>通过在表面上方设置“幽灵点”并赋予反对称应力值 ($\sigma<em>{zz}^{ghost} = -\sigma</em>{zz}^{inner}$)，精确满足地表牵引力为零 ($\sigma<em>{zz}=0, \sigma</em>{xz}=0$) 的物理条件。</li>
<li>特别优化了 <strong>8阶差分</strong> 在自由表面的实现，确保高阶精度下边界依然稳定。</li>
</ul>
</li>
</ul>
<h3 id="🖥️-现代化交互界面-Modern-UI-UX"><a href="#🖥️-现代化交互界面-Modern-UI-UX" class="headerlink" title="🖥️ 现代化交互界面 (Modern UI/UX)"></a>🖥️ 现代化交互界面 (Modern UI/UX)</h3><ul>
<li><strong>沉浸式布局</strong>: 采用 VS Code 风格的侧边栏导航 (Sidebar) + 多页堆叠 (Stacked Widget) 设计。</li>
<li><strong>实时监控</strong>: 底部集成全局控制台 (Console) 和进度条，实时反馈计算状态，界面不卡顿（多线程架构）。</li>
<li><strong>参数配置</strong>: <ul>
<li>支持从 <code>FDM2D_par.txt</code> 自动加载默认参数。</li>
<li><strong>Check &amp; Preview</strong>: 运行前自动校验参数稳定性 (CFL条件)，防止计算发散。</li>
<li><strong>Thread Control</strong>: 可在设置页面动态调整 OpenMP 线程数。</li>
</ul>
</li>
</ul>
<h3 id="📊-专业级可视化-Visualization"><a href="#📊-专业级可视化-Visualization" class="headerlink" title="📊 专业级可视化 (Visualization)"></a>📊 专业级可视化 (Visualization)</h3><ul>
<li><strong>全能地震视图 (Seismic View)</strong>:<ul>
<li><strong>Overlay 技术</strong>: 独创的 <strong>变密度图 (Image) + 波形图 (Wiggle)</strong> 叠加显示模式。</li>
<li><strong>双重控制</strong>: 底部提供独立的滑块，分别调节 Image 的对比度 (Contrast) 和 Wiggle 的增益 (Gain)。</li>
</ul>
</li>
<li><strong>专业的色标系统</strong>:<ul>
<li>内置 <strong>Seismic (Red-White-Blue)</strong>, <strong>Grayscale</strong>, <strong>Jet</strong>, <strong>Terrain</strong> 等多种地质色标。</li>
<li>支持对称归一化显示，确保零值对应白色背景。</li>
</ul>
</li>
<li><strong>交互操作</strong>: 鼠标滚轮缩放、拖拽平移、右键菜单复位、所见即所得截图。</li>
</ul>
<hr>
<h2 id="4-软件架构-Software-Architecture"><a href="#4-软件架构-Software-Architecture" class="headerlink" title="4. 软件架构 (Software Architecture)"></a>4. 软件架构 (Software Architecture)</h2><h3 id="4-1-模块划分"><a href="#4-1-模块划分" class="headerlink" title="4.1 模块划分"></a>4.1 模块划分</h3><p>该项目采用模块化设计，实现 UI 与计算逻辑的彻底解耦：</p>
<ul>
<li><strong>GUI 层 (<code>Qt_Seismic_fdm2d</code>)</strong>: <ul>
<li>负责界面渲染、用户交互、信号槽连接。</li>
<li>管理 <code>QStackedWidget</code> 页面切换 (Home, Simulation, Visualization, Settings)。</li>
</ul>
</li>
<li><strong>数据层 (<code>SimulationContext</code> / <code>Parameters</code>)</strong>: <ul>
<li>封装模拟所需的所有参数（网格、系数、模型）。</li>
<li><code>SimulationContext</code> 在计算开始前初始化，包含了所有预计算的中间变量（如 PML 衰减系数、展平后的模型参数）。</li>
</ul>
</li>
<li><strong>计算层 (<code>SeismicUtils</code> / <code>FDM_elastic_2D</code>)</strong>: <ul>
<li><code>SeismicUtils</code>: 提供数学工具（如 Ricker 子波生成、8阶差分系数计算、网格重采样）。</li>
<li><code>FDM_elastic_2D</code>: 核心物理引擎，不依赖任何 UI 组件，纯 C++ 实现。</li>
</ul>
</li>
<li><strong>绘图层 (<code>QCustomPlot</code> / <code>QCPSeismicWiggle</code>)</strong>: <ul>
<li>继承 <code>QCPAbstractPlottable</code> 实现高性能地震波形绘制。</li>
<li>实现了 <strong>LOD (Level of Detail)</strong> 降采样算法，保证在大数据量下的流畅显示。</li>
</ul>
</li>
</ul>
<h3 id="4-2-线程模型-Threading-Model"><a href="#4-2-线程模型-Threading-Model" class="headerlink" title="4.2 线程模型 (Threading Model)"></a>4.2 线程模型 (Threading Model)</h3><p>为了防止界面假死，软件采用了 <strong>Worker Thread</strong> 模式：</p>
<ol>
<li><strong>主线程 (GUI)</strong>: 处理点击事件、绘图刷新、参数设置。</li>
<li><strong>工作线程 (Worker)</strong>: 通过 <code>QtConcurrent::run</code> 启动，执行 <code>FDM_elastic_2D</code> 计算密集型任务。</li>
<li><strong>通信机制</strong>: 工作线程通过 <code>emit signals</code> (如 <code>sig_updateProgress</code>, <code>sig_appendLog</code>) 通知主线程更新 UI，实现线程安全。</li>
</ol>
<h3 id="4-3-文件结构"><a href="#4-3-文件结构" class="headerlink" title="4.3 文件结构"></a>4.3 文件结构</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Qt_Seismic_fdm2d/</span><br><span class="line">├── Qt_Seismic_fdm2d.h      # 主窗口类及数据结构定义</span><br><span class="line">├── Qt_Seismic_fdm2d.cpp    # UI 逻辑与信号槽实现</span><br><span class="line">├── SeismicUtils.cpp        # 核心算法库 (FDM Kernel, IO)</span><br><span class="line">├── QCPSeismicWiggle.h/.cpp # 自定义地震绘图控件</span><br><span class="line">├── data/</span><br><span class="line">│   ├── model_segy/         # 输入模型文件 (.sgy)</span><br><span class="line">│   └── snap/               # 输出快照与记录 (.bin/.sgy)</span><br><span class="line">└── FDM2D_par.txt           # 默认配置文件</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="5-使用指南-User-Guide"><a href="#5-使用指南-User-Guide" class="headerlink" title="5. 使用指南 (User Guide)"></a>5. 使用指南 (User Guide)</h2><h3 id="5-1-启动与配置"><a href="#5-1-启动与配置" class="headerlink" title="5.1 启动与配置"></a>5.1 启动与配置</h3><ol>
<li>进入 <strong>Simulation</strong> 页面。</li>
<li><strong>Grid &amp; Model</strong>: 设置网格大小 (<code>NX</code>, <code>NZ</code>) 和间距 (<code>dx</code>, <code>dz</code>)。可点击 “Load Vp Model” 预览速度模型。</li>
<li><strong>Geometry</strong>: 设置震源位置 (<code>Source X/Z</code>)、检波器排列范围。</li>
<li><strong>Numerical</strong>: 设置时间步长 (<code>dt</code>)、总步数 (<code>nt</code>)、边界条件类型。<ul>
<li><code>Type 1</code>: 全区域 PML (适合无界空间)。</li>
<li><code>Type 2</code>: 仅边界 PML (节省计算量)。</li>
<li><code>Type 3</code>: 上表面自由边界 + 其他三面 PML (适合地表模拟)。</li>
</ul>
</li>
<li>点击 <strong>Verify</strong> 按钮：检查参数是否满足稳定性条件。</li>
</ol>
<h3 id="5-2-运行模拟"><a href="#5-2-运行模拟" class="headerlink" title="5.2 运行模拟"></a>5.2 运行模拟</h3><ol>
<li>点击 <strong>Run</strong>。</li>
<li>观察底部 <strong>Console Output</strong> 和 <strong>Progress</strong> 条。</li>
<li>模拟过程中，界面保持响应，可随时切换到 Settings 页面调整线程数。</li>
<li>完成后，数据会自动保存到 <code>data/snap/</code>。</li>
</ol>
<h3 id="5-3-数据可视化"><a href="#5-3-数据可视化" class="headerlink" title="5.3 数据可视化"></a>5.3 数据可视化</h3><p>进入 <strong>Visualization</strong> 页面，提供多种查看方式：</p>
<ul>
<li><strong>Load SEGY Model</strong>: 查看输入的速度/密度模型。</li>
<li><strong>Wavefield Snapshots</strong>: 加载 <code>.bin</code> 快照文件，拖动时间滑块查看波场传播。</li>
<li><strong>Seismic Records</strong>: 加载地震记录（共炮点道集）。<ul>
<li>使用 <strong>Overlay View</strong> 模式，同时观察波形细节和能量强弱。</li>
<li>支持导出标准 SEGY 格式数据。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="6-环境依赖与构建-Build-amp-Install"><a href="#6-环境依赖与构建-Build-amp-Install" class="headerlink" title="6. 环境依赖与构建 (Build &amp; Install)"></a>6. 环境依赖与构建 (Build &amp; Install)</h2><h3 id="前置要求-Prerequisites"><a href="#前置要求-Prerequisites" class="headerlink" title="前置要求 (Prerequisites)"></a>前置要求 (Prerequisites)</h3><ul>
<li><strong>IDE</strong>: Visual Studio 2019 或 2022 (推荐)。</li>
<li><strong>Qt</strong>: 安装 Qt 5.15 或更高版本，并配置 VS Qt Tools 插件。</li>
<li><strong>Libraries</strong>:<ul>
<li><strong>Eigen 3</strong>: 需将头文件路径添加到项目包含目录。</li>
<li><strong>QCustomPlot 2.1</strong>: 用于绘图（已集成在源码中）。</li>
<li><strong>OpenMP</strong>: 必须在编译器选项中开启 (<code>/openmp</code>)。</li>
</ul>
</li>
</ul>
<h3 id="编译步骤-Steps"><a href="#编译步骤-Steps" class="headerlink" title="编译步骤 (Steps)"></a>编译步骤 (Steps)</h3><ol>
<li>使用 Visual Studio 打开 <code>.sln</code> 或 <code>.pro</code> 文件。</li>
<li>确保构建模式为 <strong>Release</strong> (Debug 模式下大量循环计算会非常慢)。</li>
<li>点击 <strong>Build Solution (生成解决方案)</strong>。</li>
<li>运行生成的可执行文件。</li>
</ol>
<hr>
<h2 id="7-版权与授权说明-License"><a href="#7-版权与授权说明-License" class="headerlink" title="7. 版权与授权说明 (License)"></a>7. 版权与授权说明 (License)</h2><h3 id="项目源码授权"><a href="#项目源码授权" class="headerlink" title="项目源码授权"></a>项目源码授权</h3><p>本项目（Seis-FDM-Tool）的源代码采用 <strong>MIT License</strong>。允许个人及商业用途的自由修改和分发，但需保留原始版权声明。</p>
<h3 id="第三方库授权"><a href="#第三方库授权" class="headerlink" title="第三方库授权"></a>第三方库授权</h3><p>本项目依赖以下第三方库，它们拥有各自的授权协议：</p>
<ul>
<li><strong>Qt 6</strong>: 遵循 <strong>LGPL v3</strong> (GNU Lesser General Public License v3)。</li>
<li><strong>QCustomPlot</strong>: 遵循 <strong>GPL v3</strong>。</li>
<li><strong>Eigen 3</strong>: 遵循 <strong>MPL2</strong> (Mozilla Public License 2.0)。</li>
</ul>
<p>在使用、分发或商业化本软件时，请务必遵守上述第三方库的许可协议。</p>
<p><strong>主要维护者</strong>: XYU<br><strong>当前版本</strong>: v2.1.0 Stable</p>
<hr>
<h2 id="8-致谢-Acknowledgements"><a href="#8-致谢-Acknowledgements" class="headerlink" title="8. 致谢 (Acknowledgements)"></a>8. 致谢 (Acknowledgements)</h2>]]></content>
      <categories>
        <category>技术项目</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>Qt</tag>
        <tag>Seis Tool</tag>
        <tag>地震</tag>
        <tag>弹性波模拟</tag>
        <tag>有限差分法</tag>
        <tag>OpenMP</tag>
      </tags>
  </entry>
  <entry>
    <title>Pysider6_无边框_DEMO</title>
    <url>/2026/01/18/Pysider6-%E6%97%A0%E8%BE%B9%E6%A1%86-DEMO/</url>
    <content><![CDATA[<h1 id="Modern-PySide6-System-Dashboard"><a href="#Modern-PySide6-System-Dashboard" class="headerlink" title="Modern PySide6 System Dashboard"></a>Modern PySide6 System Dashboard</h1><blockquote>
<p>一个基于 Python 和 PySide6 构建的现代化、无边框桌面应用程序模板。采用解耦架构设计，具有高端的视觉效果和流畅的交互体验。</p>
</blockquote>
<span id="more"></span>
<p><img src="主页截图2.png" alt="Dashboard Screenshot"></p>
<h2 id="📚-项目地址-Project-Address"><a href="#📚-项目地址-Project-Address" class="headerlink" title="📚 项目地址 (Project Address)"></a>📚 项目地址 (Project Address)</h2><p>—- <a href="https://github.com/XiaoYu-1111/Pysider6_-_DEMO">https://github.com/XiaoYu-1111/Pysider6_-_DEMO</a></p>
<h2 id="✨-主要功能-Features"><a href="#✨-主要功能-Features" class="headerlink" title="✨ 主要功能 (Features)"></a>✨ 主要功能 (Features)</h2><ul>
<li><strong>现代化 UI 设计</strong>：<ul>
<li>采用 <strong>Nord/Dracula</strong> 深色配色方案，视觉舒适。</li>
<li>无边框窗口设计，带有自定义的 <strong>阴影特效 (Drop Shadow)</strong>。</li>
<li>全自定义的标题栏，支持拖拽移动、最小化、最大化及关闭。</li>
</ul>
</li>
<li><strong>高级时钟显示</strong>：<ul>
<li>支持 HTML 格式化的大型数字时钟（时分秒视觉分层）。</li>
<li>包含日期显示，采用宽字间距排版，模拟高端仪表盘效果。</li>
</ul>
</li>
<li><strong>流畅的交互</strong>：<ul>
<li>侧边栏导航（Home, Dashboard, Settings）带有悬停高亮动画。</li>
<li>自定义样式的“退出确认”弹窗。</li>
<li>窗口边缘拖拽调整大小（通过 QSizeGrip）。</li>
</ul>
</li>
<li><strong>代码架构解耦</strong>：<ul>
<li>逻辑（Logic）、界面（Layout）与样式（Styles）分离，易于维护和扩展。</li>
</ul>
</li>
</ul>
<h2 id="🛠️-技术栈-Tech-Stack"><a href="#🛠️-技术栈-Tech-Stack" class="headerlink" title="🛠️ 技术栈 (Tech Stack)"></a>🛠️ 技术栈 (Tech Stack)</h2><ul>
<li><strong>语言</strong>: Python 3.9+</li>
<li><strong>GUI 框架</strong>: PySide6 (Qt for Python)</li>
<li><strong>核心模块</strong>: <code>QtCore</code>, <code>QtGui</code>, <code>QtWidgets</code></li>
</ul>
<h2 id="📂-项目结构-Project-Structure"><a href="#📂-项目结构-Project-Structure" class="headerlink" title="📂 项目结构 (Project Structure)"></a>📂 项目结构 (Project Structure)</h2><p>项目采用 MVC 思想进行了初步解耦，包含以下核心文件：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">├── main.py             # [入口] 主程序控制器，处理窗口逻辑、事件分发和定时器</span><br><span class="line">├── modern_1_ui.py      # [视图] 界面布局定义 (UI Layout)</span><br><span class="line">├── styles.py           # [样式] 存储所有 QSS 样式表 (CSS-like styling)</span><br><span class="line">└── user_function.py    # [模型] 独立的业务逻辑函数库</span><br></pre></td></tr></table></figure>
<h2 id="🚀-快速开始-Getting-Started"><a href="#🚀-快速开始-Getting-Started" class="headerlink" title="🚀 快速开始 (Getting Started)"></a>🚀 快速开始 (Getting Started)</h2><h3 id="1-环境准备"><a href="#1-环境准备" class="headerlink" title="1. 环境准备"></a>1. 环境准备</h3><p>确保你的电脑上安装了 Python 3。</p>
<h3 id="2-安装依赖"><a href="#2-安装依赖" class="headerlink" title="2. 安装依赖"></a>2. 安装依赖</h3><p>本项目仅依赖 <code>PySide6</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install PySide6</span><br></pre></td></tr></table></figure>
<h3 id="3-运行项目"><a href="#3-运行项目" class="headerlink" title="3. 运行项目"></a>3. 运行项目</h3><p>在终端中执行主程序：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python main.py</span><br></pre></td></tr></table></figure>
<h2 id="🎨-界面展示-Screenshots"><a href="#🎨-界面展示-Screenshots" class="headerlink" title="🎨 界面展示 (Screenshots)"></a>🎨 界面展示 (Screenshots)</h2><h3 id="首页-Home"><a href="#首页-Home" class="headerlink" title="首页 (Home)"></a>首页 (Home)</h3><p>包含极简的搜索框、超大字号的系统时间与日期显示。<br><img src="主页截图2.png" alt="Dashboard Screenshot"></p>
<h3 id="仪表盘-Dashboard"><a href="#仪表盘-Dashboard" class="headerlink" title="仪表盘 (Dashboard)"></a>仪表盘 (Dashboard)</h3><p>展示功能按钮组，演示了页面切换逻辑。<br><em>(在此处插入仪表盘页截图)</em></p>
<h3 id="退出确认"><a href="#退出确认" class="headerlink" title="退出确认"></a>退出确认</h3><p>自定义样式的模态对话框，与主界面风格保持一致。<br><em>(在此处插入弹窗截图)</em></p>
<h2 id="📝-开发指南-Development"><a href="#📝-开发指南-Development" class="headerlink" title="📝 开发指南 (Development)"></a>📝 开发指南 (Development)</h2><p>如果你想修改界面：</p>
<ol>
<li><strong>修改布局</strong>：编辑 <code>modern_1_ui.py</code>。建议使用代码直接修改，或者使用 Qt Designer 生成后手动调整。</li>
<li><strong>修改样式</strong>：直接编辑 <code>styles.py</code> 中的 <code>STYLESHEET</code> 变量，支持标准的 CSS 语法。</li>
<li><strong>添加逻辑</strong>：在 <code>user_function.py</code> 中编写静态方法，并在 <code>main.py</code> 中通过 <code>connect</code> 进行绑定。</li>
</ol>
<h2 id="📄-License"><a href="#📄-License" class="headerlink" title="📄 License"></a>📄 License</h2><p>MIT License. 随意使用和修改。</p>
<h1 id="文件名-main-py"><a href="#文件名-main-py" class="headerlink" title="文件名: main.py"></a>文件名: main.py</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># --- 文件名: main.py ---</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> webbrowser</span><br><span class="line"><span class="comment"># 关键：确保导入 QTimer, QTime</span></span><br><span class="line"><span class="keyword">from</span> PySide6.QtCore <span class="keyword">import</span> Qt, QPoint, QEvent, QTimer, QTime, QDate</span><br><span class="line"><span class="keyword">from</span> PySide6.QtGui <span class="keyword">import</span> QColor, QMouseEvent, QCursor</span><br><span class="line"><span class="keyword">from</span> PySide6.QtWidgets <span class="keyword">import</span> (QApplication, QMainWindow, QWidget, QGraphicsDropShadowEffect, </span><br><span class="line">                                QSizeGrip, QVBoxLayout, QFrame, QMessageBox)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> modern_1_ui <span class="keyword">import</span> Ui_MainWindow</span><br><span class="line"><span class="keyword">from</span> user_function <span class="keyword">import</span> UserLogic</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 导入样式</span></span><br><span class="line"><span class="keyword">from</span> styles <span class="keyword">import</span> MAIN_STYLE, MSGBOX_STYLE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span>(<span class="title class_ inherited__">QMainWindow</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.ui = Ui_MainWindow()</span><br><span class="line">        <span class="variable language_">self</span>.ui.setupUi(<span class="variable language_">self</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1. 基础设置</span></span><br><span class="line">        <span class="variable language_">self</span>.setWindowFlags(Qt.FramelessWindowHint)</span><br><span class="line">        <span class="variable language_">self</span>.setAttribute(Qt.WA_TranslucentBackground)</span><br><span class="line">        <span class="variable language_">self</span>.resize(<span class="number">900</span>, <span class="number">600</span>)</span><br><span class="line">        <span class="variable language_">self</span>.ui.centralwidget.setStyleSheet(MAIN_STYLE)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 2. 阴影</span></span><br><span class="line">        <span class="variable language_">self</span>.shadow = QGraphicsDropShadowEffect(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="variable language_">self</span>.shadow.setBlurRadius(<span class="number">20</span>)</span><br><span class="line">        <span class="variable language_">self</span>.shadow.setColor(QColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>))</span><br><span class="line">        <span class="variable language_">self</span>.ui.drap_shadow_frame.setGraphicsEffect(<span class="variable language_">self</span>.shadow)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.ui.title_bar.setFixedHeight(<span class="number">50</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 3. 信号连接</span></span><br><span class="line">        <span class="variable language_">self</span>.ui.btn_close.clicked.connect(<span class="variable language_">self</span>.close)</span><br><span class="line">        <span class="variable language_">self</span>.ui.btn_minimize.clicked.connect(<span class="variable language_">self</span>.showMinimized)</span><br><span class="line">        <span class="variable language_">self</span>.ui.btn_maximize.clicked.connect(<span class="variable language_">self</span>.maximize_restore)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.ui.Page1_button.clicked.connect(<span class="keyword">lambda</span>: <span class="variable language_">self</span>.ui.stackedWidget.setCurrentIndex(<span class="number">0</span>))</span><br><span class="line">        <span class="variable language_">self</span>.ui.Page2_button.clicked.connect(<span class="keyword">lambda</span>: <span class="variable language_">self</span>.ui.stackedWidget.setCurrentIndex(<span class="number">1</span>))</span><br><span class="line">        <span class="variable language_">self</span>.ui.Page3_button.clicked.connect(<span class="keyword">lambda</span>: <span class="variable language_">self</span>.ui.stackedWidget.setCurrentIndex(<span class="number">2</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.ui.Search_but.clicked.connect(<span class="variable language_">self</span>.search)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 连接 Page 2 的 Option 按钮</span></span><br><span class="line">        <span class="variable language_">self</span>.ui.Page1_but2.clicked.connect(UserLogic.print_hello)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.sizegrip = QSizeGrip(<span class="variable language_">self</span>.ui.frame_grip)</span><br><span class="line">        <span class="variable language_">self</span>.sizegrip.setStyleSheet(<span class="string">&quot;width: 20px; height: 20px; margin: 0px; padding: 0px;&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.drag_pos = QPoint()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ============================================</span></span><br><span class="line">        <span class="comment"># 启动时钟 (确保 QTimer 导入成功)</span></span><br><span class="line">        <span class="comment"># ============================================</span></span><br><span class="line">        <span class="variable language_">self</span>.timer = QTimer(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="variable language_">self</span>.timer.timeout.connect(<span class="variable language_">self</span>.update_system_time)</span><br><span class="line">        <span class="variable language_">self</span>.timer.start(<span class="number">1000</span>) <span class="comment"># 1秒刷新一次</span></span><br><span class="line">        <span class="variable language_">self</span>.update_system_time()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_system_time</span>(<span class="params">self</span>):</span><br><span class="line">            <span class="comment"># 1. 获取当前时间对象</span></span><br><span class="line">            now = QTime.currentTime()</span><br><span class="line">            <span class="comment"># 2. 获取当前日期对象</span></span><br><span class="line">            date = QDate.currentDate()</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># --- 优化时间显示 (HTML大法) ---</span></span><br><span class="line">            <span class="comment"># 格式化小时和分钟</span></span><br><span class="line">            time_text = now.toString(<span class="string">&quot;HH:mm&quot;</span>)</span><br><span class="line">            <span class="comment"># 格式化秒</span></span><br><span class="line">            second_text = now.toString(<span class="string">&quot;ss&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 使用 HTML：</span></span><br><span class="line">            <span class="comment"># &lt;span style=&#x27;font-size:110px&#x27;&gt;HH:mm&lt;/span&gt;: 主体时间</span></span><br><span class="line">            <span class="comment"># &lt;span style=&#x27;font-size:50px; color:#616E88; vertical-align:sub&#x27;&gt;:ss&lt;/span&gt;: 秒数 (更小，颜色更暗，轻微下沉)</span></span><br><span class="line">            html_content = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            &lt;html&gt;</span></span><br><span class="line"><span class="string">            &lt;head/&gt;</span></span><br><span class="line"><span class="string">            &lt;body&gt;</span></span><br><span class="line"><span class="string">                &lt;span style=&#x27;font-weight:100;&#x27;&gt;<span class="subst">&#123;time_text&#125;</span>&lt;/span&gt;&lt;span style=&#x27;font-size:50px; color:#81A1C1; vertical-align:bottom; font-weight:300;&#x27;&gt;:<span class="subst">&#123;second_text&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/body&gt;</span></span><br><span class="line"><span class="string">            &lt;/html&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">            <span class="variable language_">self</span>.ui.label_time.setText(html_content)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># --- 优化日期显示 ---</span></span><br><span class="line">            <span class="comment"># 格式：MONDAY | JAN 25, 2026 (全大写)</span></span><br><span class="line">            date_text = date.toString(<span class="string">&quot;dddd | MMM dd, yyyy&quot;</span>).upper()</span><br><span class="line">            <span class="variable language_">self</span>.ui.label_date.setText(date_text)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 关闭确认弹窗</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">closeEvent</span>(<span class="params">self, event</span>):</span><br><span class="line">        msg_box = QMessageBox(<span class="variable language_">self</span>)</span><br><span class="line">        msg_box.setWindowTitle(<span class="string">&quot;Exit&quot;</span>)</span><br><span class="line">        msg_box.setText(<span class="string">&quot;Are you sure?&quot;</span>)</span><br><span class="line">        msg_box.setStandardButtons(QMessageBox.Yes | QMessageBox.No)</span><br><span class="line">        msg_box.setDefaultButton(QMessageBox.No)</span><br><span class="line">        msg_box.setStyleSheet(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            QMessageBox &#123; background-color: #2E3440; color: #ECEFF4; &#125;</span></span><br><span class="line"><span class="string">            QLabel &#123; color: #ECEFF4; font-size: 14px; &#125;</span></span><br><span class="line"><span class="string">            QPushButton &#123; background-color: #4C566A; color: white; border-radius: 5px; padding: 5px 15px; border: 1px solid #2E3440; &#125;</span></span><br><span class="line"><span class="string">            QPushButton:hover &#123; background-color: #5E81AC; border: 1px solid #88C0D0; &#125;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> msg_box.<span class="built_in">exec</span>() == QMessageBox.Yes:</span><br><span class="line">            event.accept()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            event.ignore()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maximize_restore</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.isMaximized():</span><br><span class="line">            <span class="variable language_">self</span>.showNormal()</span><br><span class="line">            <span class="variable language_">self</span>.ui.drap_shadow_layout.setContentsMargins(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">            <span class="variable language_">self</span>.ui.drap_shadow_frame.setStyleSheet(<span class="string">&quot;QFrame#drap_shadow_frame &#123; background-color: #2E3440; border: 1px solid #4C566A; border-radius: 15px; &#125;&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.ui.widget.setStyleSheet(<span class="string">&quot;QWidget#widget &#123; border-bottom-left-radius: 15px; background-color: #3B4252; &#125;&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.ui.credits_bar.setStyleSheet(<span class="string">&quot;QFrame#credits_bar &#123; background-color: #2E3440; border-top: 1px solid #434C5E; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px; &#125;&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.showMaximized()</span><br><span class="line">            <span class="variable language_">self</span>.ui.drap_shadow_layout.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">            <span class="variable language_">self</span>.ui.drap_shadow_frame.setStyleSheet(<span class="string">&quot;QFrame#drap_shadow_frame &#123; background-color: #2E3440; border: none; border-radius: 0px; &#125;&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.ui.widget.setStyleSheet(<span class="string">&quot;QWidget#widget &#123; border-radius: 0px; background-color: #3B4252; &#125;&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.ui.credits_bar.setStyleSheet(<span class="string">&quot;QFrame#credits_bar &#123; background-color: #2E3440; border-top: 1px solid #434C5E; border-radius: 0px; &#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">changeEvent</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="keyword">if</span> event.<span class="built_in">type</span>() == QEvent.WindowStateChange:</span><br><span class="line">            <span class="keyword">if</span> <span class="variable language_">self</span>.isMaximized():</span><br><span class="line">                <span class="variable language_">self</span>.ui.drap_shadow_layout.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">                <span class="variable language_">self</span>.ui.drap_shadow_frame.setStyleSheet(<span class="string">&quot;QFrame#drap_shadow_frame &#123; background-color: #2E3440; border-radius: 0px; &#125;&quot;</span>)</span><br><span class="line">                <span class="variable language_">self</span>.ui.widget.setStyleSheet(<span class="string">&quot;QWidget#widget &#123; border-radius: 0px; background-color: #3B4252; &#125;&quot;</span>)</span><br><span class="line">                <span class="variable language_">self</span>.ui.credits_bar.setStyleSheet(<span class="string">&quot;QFrame#credits_bar &#123; background-color: #2E3440; border-top: 1px solid #434C5E; border-radius: 0px; &#125;&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="variable language_">self</span>.ui.drap_shadow_layout.setContentsMargins(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">                <span class="variable language_">self</span>.ui.drap_shadow_frame.setStyleSheet(<span class="string">&quot;QFrame#drap_shadow_frame &#123; background-color: #2E3440; border: 1px solid #4C566A; border-radius: 15px; &#125;&quot;</span>)</span><br><span class="line">                <span class="variable language_">self</span>.ui.widget.setStyleSheet(<span class="string">&quot;QWidget#widget &#123; border-bottom-left-radius: 15px; background-color: #3B4252; &#125;&quot;</span>)</span><br><span class="line">                <span class="variable language_">self</span>.ui.credits_bar.setStyleSheet(<span class="string">&quot;QFrame#credits_bar &#123; background-color: #2E3440; border-top: 1px solid #434C5E; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px; &#125;&quot;</span>)</span><br><span class="line">        <span class="built_in">super</span>().changeEvent(event)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">self</span>):</span><br><span class="line">        query = <span class="variable language_">self</span>.ui.Search_con.text()</span><br><span class="line">        <span class="keyword">if</span> query:</span><br><span class="line">            webbrowser.<span class="built_in">open</span>(<span class="string">f&quot;https://www.baidu.com/s?wd=<span class="subst">&#123;query&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mousePressEvent</span>(<span class="params">self, event: QMouseEvent</span>):</span><br><span class="line">        <span class="keyword">if</span> event.button() == Qt.LeftButton <span class="keyword">and</span> <span class="variable language_">self</span>.ui.title_bar.underMouse():</span><br><span class="line">            <span class="variable language_">self</span>.drag_pos = event.globalPosition().toPoint() - <span class="variable language_">self</span>.frameGeometry().topLeft()</span><br><span class="line">            event.accept()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mouseMoveEvent</span>(<span class="params">self, event: QMouseEvent</span>):</span><br><span class="line">        <span class="keyword">if</span> event.buttons() == Qt.LeftButton <span class="keyword">and</span> <span class="keyword">not</span> <span class="variable language_">self</span>.drag_pos.isNull() <span class="keyword">and</span> <span class="keyword">not</span> <span class="variable language_">self</span>.isMaximized():</span><br><span class="line">            <span class="variable language_">self</span>.move(event.globalPosition().toPoint() - <span class="variable language_">self</span>.drag_pos)</span><br><span class="line">            event.accept()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mouseReleaseEvent</span>(<span class="params">self, event: QMouseEvent</span>):</span><br><span class="line">        <span class="variable language_">self</span>.drag_pos = QPoint()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    window = MainWindow()</span><br><span class="line">    window.show()</span><br><span class="line">    sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure>
<h1 id="文件名-modern-1-ui-py"><a href="#文件名-modern-1-ui-py" class="headerlink" title="文件名: modern_1_ui.py"></a>文件名: modern_1_ui.py</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># --- 文件名: modern_1_ui.py ---</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PySide6.QtCore <span class="keyword">import</span> (QCoreApplication, QMetaObject, QSize, Qt)</span><br><span class="line"><span class="keyword">from</span> PySide6.QtWidgets <span class="keyword">import</span> (QFrame, QHBoxLayout, QLabel,</span><br><span class="line">    QLineEdit, QPushButton, QStackedWidget, QVBoxLayout, QWidget, QSpacerItem, QSizePolicy)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ui_MainWindow</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setupUi</span>(<span class="params">self, MainWindow</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> MainWindow.objectName():</span><br><span class="line">            MainWindow.setObjectName(<span class="string">u&quot;MainWindow&quot;</span>)</span><br><span class="line">        MainWindow.resize(<span class="number">800</span>, <span class="number">500</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.centralwidget = QWidget(MainWindow)</span><br><span class="line">        <span class="variable language_">self</span>.centralwidget.setObjectName(<span class="string">u&quot;centralwidget&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 主布局</span></span><br><span class="line">        <span class="variable language_">self</span>.drap_shadow_layout = QVBoxLayout(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.drap_shadow_layout.setSpacing(<span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.drap_shadow_layout.setContentsMargins(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 阴影背景 Frame</span></span><br><span class="line">        <span class="variable language_">self</span>.drap_shadow_frame = QFrame(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.drap_shadow_frame.setObjectName(<span class="string">u&quot;drap_shadow_frame&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.drap_shadow_frame.setFrameShape(QFrame.NoFrame)</span><br><span class="line">        <span class="variable language_">self</span>.drap_shadow_frame.setFrameShadow(QFrame.Raised)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout = QVBoxLayout(<span class="variable language_">self</span>.drap_shadow_frame)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout.setSpacing(<span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># --- 1. 顶部标题栏 ---</span></span><br><span class="line">        <span class="variable language_">self</span>.title_bar = QFrame(<span class="variable language_">self</span>.drap_shadow_frame)</span><br><span class="line">        <span class="variable language_">self</span>.title_bar.setObjectName(<span class="string">u&quot;title_bar&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.title_bar.setMaximumSize(QSize(<span class="number">16777215</span>, <span class="number">50</span>))</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout = QHBoxLayout(<span class="variable language_">self</span>.title_bar)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.frame_title = QFrame(<span class="variable language_">self</span>.title_bar)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_2 = QVBoxLayout(<span class="variable language_">self</span>.frame_title)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_2.setContentsMargins(<span class="number">20</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label_title = QLabel(<span class="string">&quot;System Dashboard&quot;</span>, <span class="variable language_">self</span>.frame_title)</span><br><span class="line">        <span class="variable language_">self</span>.label_title.setObjectName(<span class="string">u&quot;label_title&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_2.addWidget(<span class="variable language_">self</span>.label_title)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout.addWidget(<span class="variable language_">self</span>.frame_title)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.frame_btns = QFrame(<span class="variable language_">self</span>.title_bar)</span><br><span class="line">        <span class="variable language_">self</span>.frame_btns.setMaximumSize(QSize(<span class="number">100</span>, <span class="number">16777215</span>))</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_2 = QHBoxLayout(<span class="variable language_">self</span>.frame_btns)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.btn_minimize = QPushButton(<span class="variable language_">self</span>.frame_btns)</span><br><span class="line">        <span class="variable language_">self</span>.btn_minimize.setObjectName(<span class="string">u&quot;btn_minimize&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn_minimize.setFixedSize(<span class="number">16</span>, <span class="number">16</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn_maximize = QPushButton(<span class="variable language_">self</span>.frame_btns)</span><br><span class="line">        <span class="variable language_">self</span>.btn_maximize.setObjectName(<span class="string">u&quot;btn_maximize&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn_maximize.setFixedSize(<span class="number">16</span>, <span class="number">16</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn_close = QPushButton(<span class="variable language_">self</span>.frame_btns)</span><br><span class="line">        <span class="variable language_">self</span>.btn_close.setObjectName(<span class="string">u&quot;btn_close&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn_close.setFixedSize(<span class="number">16</span>, <span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_2.addWidget(<span class="variable language_">self</span>.btn_minimize)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_2.addWidget(<span class="variable language_">self</span>.btn_maximize)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_2.addWidget(<span class="variable language_">self</span>.btn_close)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout.addWidget(<span class="variable language_">self</span>.frame_btns)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout.addWidget(<span class="variable language_">self</span>.title_bar)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># --- 2. 中间内容区 ---</span></span><br><span class="line">        <span class="variable language_">self</span>.content_bar = QFrame(<span class="variable language_">self</span>.drap_shadow_frame)</span><br><span class="line">        <span class="variable language_">self</span>.content_bar.setObjectName(<span class="string">u&quot;content_bar&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_4 = QVBoxLayout(<span class="variable language_">self</span>.content_bar)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_4.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_4 = QHBoxLayout()</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_4.setSpacing(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 左侧菜单</span></span><br><span class="line">        <span class="variable language_">self</span>.widget = QWidget(<span class="variable language_">self</span>.content_bar)</span><br><span class="line">        <span class="variable language_">self</span>.widget.setObjectName(<span class="string">u&quot;widget&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.widget.setMinimumSize(QSize(<span class="number">150</span>, <span class="number">0</span>))</span><br><span class="line">        <span class="variable language_">self</span>.widget.setMaximumSize(QSize(<span class="number">200</span>, <span class="number">16777215</span>))</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_7 = QVBoxLayout(<span class="variable language_">self</span>.widget)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_7.setContentsMargins(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.Page1_button = QPushButton(<span class="variable language_">self</span>.widget)</span><br><span class="line">        <span class="variable language_">self</span>.Page1_button.setObjectName(<span class="string">u&quot;Page1_button&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Page1_button.setMinimumHeight(<span class="number">40</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Page2_button = QPushButton(<span class="variable language_">self</span>.widget)</span><br><span class="line">        <span class="variable language_">self</span>.Page2_button.setObjectName(<span class="string">u&quot;Page2_button&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Page2_button.setMinimumHeight(<span class="number">40</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Page3_button = QPushButton(<span class="variable language_">self</span>.widget)</span><br><span class="line">        <span class="variable language_">self</span>.Page3_button.setObjectName(<span class="string">u&quot;Page3_button&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Page3_button.setMinimumHeight(<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_7.addWidget(<span class="variable language_">self</span>.Page1_button)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_7.addWidget(<span class="variable language_">self</span>.Page2_button)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_7.addWidget(<span class="variable language_">self</span>.Page3_button)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [修复点 1] 使用 addSpacerItem 替代 addSpacer</span></span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_7.addSpacerItem(QSpacerItem(<span class="number">20</span>, <span class="number">40</span>, QSizePolicy.Minimum, QSizePolicy.Expanding))</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_4.addWidget(<span class="variable language_">self</span>.widget)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 右侧页面堆叠</span></span><br><span class="line">        <span class="variable language_">self</span>.widget_2 = QWidget(<span class="variable language_">self</span>.content_bar)</span><br><span class="line">        <span class="variable language_">self</span>.widget_2.setObjectName(<span class="string">u&quot;widget_2&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_5 = QVBoxLayout(<span class="variable language_">self</span>.widget_2)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_5.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.stackedWidget = QStackedWidget(<span class="variable language_">self</span>.widget_2)</span><br><span class="line">        <span class="variable language_">self</span>.stackedWidget.setObjectName(<span class="string">u&quot;stackedWidget&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># &gt;&gt;&gt; Page 1: 搜索 + 时间 &lt;&lt;&lt;</span></span><br><span class="line">        <span class="variable language_">self</span>.page_1 = QWidget()</span><br><span class="line">        <span class="variable language_">self</span>.page_1.setObjectName(<span class="string">u&quot;page_1&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.layout_p1 = QVBoxLayout(<span class="variable language_">self</span>.page_1)</span><br><span class="line">        <span class="variable language_">self</span>.layout_p1.setSpacing(<span class="number">10</span>) <span class="comment"># 减小间距，让时间和日期靠得近一点</span></span><br><span class="line">        <span class="variable language_">self</span>.layout_p1.setContentsMargins(<span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 搜索框 (保持不变)</span></span><br><span class="line">        <span class="variable language_">self</span>.frame_search = QFrame(<span class="variable language_">self</span>.page_1)</span><br><span class="line">        <span class="variable language_">self</span>.frame_search.setMaximumHeight(<span class="number">60</span>)</span><br><span class="line">        <span class="variable language_">self</span>.hbox_search = QHBoxLayout(<span class="variable language_">self</span>.frame_search)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.Search_con = QLineEdit(<span class="variable language_">self</span>.frame_search)</span><br><span class="line">        <span class="variable language_">self</span>.Search_con.setObjectName(<span class="string">u&quot;Search_con&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Search_con.setMinimumHeight(<span class="number">40</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Search_con.setPlaceholderText(<span class="string">&quot;Search Web...&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.Search_but = QPushButton(<span class="variable language_">self</span>.frame_search)</span><br><span class="line">        <span class="variable language_">self</span>.Search_but.setObjectName(<span class="string">u&quot;Search_but&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Search_but.setMinimumSize(<span class="number">100</span>, <span class="number">40</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.hbox_search.addWidget(<span class="variable language_">self</span>.Search_con)</span><br><span class="line">        <span class="variable language_">self</span>.hbox_search.addWidget(<span class="variable language_">self</span>.Search_but)</span><br><span class="line">        <span class="variable language_">self</span>.layout_p1.addWidget(<span class="variable language_">self</span>.frame_search)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># --- 时间显示区域容器 (用来垂直居中) ---</span></span><br><span class="line">        <span class="variable language_">self</span>.layout_p1.addStretch() <span class="comment"># 顶开上面的空间</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1. 系统时间 Label</span></span><br><span class="line">        <span class="variable language_">self</span>.label_time = QLabel(<span class="string">&quot;00:00&quot;</span>, <span class="variable language_">self</span>.page_1)</span><br><span class="line">        <span class="variable language_">self</span>.label_time.setObjectName(<span class="string">u&quot;label_time&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label_time.setAlignment(Qt.AlignCenter)</span><br><span class="line">        <span class="variable language_">self</span>.layout_p1.addWidget(<span class="variable language_">self</span>.label_time)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. [新增] 日期 Label</span></span><br><span class="line">        <span class="variable language_">self</span>.label_date = QLabel(<span class="string">&quot;MONDAY, DATE&quot;</span>, <span class="variable language_">self</span>.page_1)</span><br><span class="line">        <span class="variable language_">self</span>.label_date.setObjectName(<span class="string">u&quot;label_date&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label_date.setAlignment(Qt.AlignCenter)</span><br><span class="line">        <span class="variable language_">self</span>.layout_p1.addWidget(<span class="variable language_">self</span>.label_date)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.layout_p1.addStretch() <span class="comment"># 顶开下面的空间</span></span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.stackedWidget.addWidget(<span class="variable language_">self</span>.page_1)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># &gt;&gt;&gt; Page 2: 选项按钮组 &lt;&lt;&lt;</span></span><br><span class="line">        <span class="variable language_">self</span>.page_2 = QWidget()</span><br><span class="line">        <span class="variable language_">self</span>.page_2.setObjectName(<span class="string">u&quot;page_2&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.layout_p2 = QVBoxLayout(<span class="variable language_">self</span>.page_2)</span><br><span class="line">        <span class="variable language_">self</span>.layout_p2.setContentsMargins(<span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>)</span><br><span class="line">        <span class="variable language_">self</span>.layout_p2.setSpacing(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.label_p2_title = QLabel(<span class="string">&quot;Dashboard Options&quot;</span>, <span class="variable language_">self</span>.page_2)</span><br><span class="line">        <span class="variable language_">self</span>.label_p2_title.setStyleSheet(<span class="string">&quot;font-size: 24px; color: #E0E0E0; font-weight: bold;&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label_p2_title.setAlignment(Qt.AlignCenter)</span><br><span class="line">        <span class="variable language_">self</span>.layout_p2.addWidget(<span class="variable language_">self</span>.label_p2_title)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.frame_options = QFrame(<span class="variable language_">self</span>.page_2)</span><br><span class="line">        <span class="variable language_">self</span>.hbox_options = QHBoxLayout(<span class="variable language_">self</span>.frame_options)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.Page1_but1 = QPushButton(<span class="string">&quot;Option 1&quot;</span>, <span class="variable language_">self</span>.frame_options)</span><br><span class="line">        <span class="variable language_">self</span>.Page1_but1.setObjectName(<span class="string">u&quot;Page1_but1&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Page1_but1.setMinimumHeight(<span class="number">45</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.Page1_but2 = QPushButton(<span class="string">&quot;Option 2&quot;</span>, <span class="variable language_">self</span>.frame_options)</span><br><span class="line">        <span class="variable language_">self</span>.Page1_but2.setObjectName(<span class="string">u&quot;Page1_but2&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Page1_but2.setMinimumHeight(<span class="number">45</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.Page1_but3 = QPushButton(<span class="string">&quot;Option 3&quot;</span>, <span class="variable language_">self</span>.frame_options)</span><br><span class="line">        <span class="variable language_">self</span>.Page1_but3.setObjectName(<span class="string">u&quot;Page1_but3&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.Page1_but3.setMinimumHeight(<span class="number">45</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.hbox_options.addWidget(<span class="variable language_">self</span>.Page1_but1)</span><br><span class="line">        <span class="variable language_">self</span>.hbox_options.addWidget(<span class="variable language_">self</span>.Page1_but2)</span><br><span class="line">        <span class="variable language_">self</span>.hbox_options.addWidget(<span class="variable language_">self</span>.Page1_but3)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.layout_p2.addWidget(<span class="variable language_">self</span>.frame_options)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [修复点 2] 使用 addSpacerItem 替代 addSpacer</span></span><br><span class="line">        <span class="variable language_">self</span>.layout_p2.addSpacerItem(QSpacerItem(<span class="number">20</span>, <span class="number">40</span>, QSizePolicy.Minimum, QSizePolicy.Expanding))</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.stackedWidget.addWidget(<span class="variable language_">self</span>.page_2)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># &gt;&gt;&gt; Page 3: 设置 &lt;&lt;&lt;</span></span><br><span class="line">        <span class="variable language_">self</span>.page_3 = QWidget()</span><br><span class="line">        <span class="variable language_">self</span>.page_3.setObjectName(<span class="string">u&quot;page_3&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label_2 = QLabel(<span class="string">&quot;Settings Page&quot;</span>, <span class="variable language_">self</span>.page_3)</span><br><span class="line">        <span class="variable language_">self</span>.label_2.setAlignment(Qt.AlignCenter)</span><br><span class="line">        <span class="variable language_">self</span>.label_2.setStyleSheet(<span class="string">&quot;font-size: 20px; color: #BF616A;&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.vbox_p3 = QVBoxLayout(<span class="variable language_">self</span>.page_3)</span><br><span class="line">        <span class="variable language_">self</span>.vbox_p3.addWidget(<span class="variable language_">self</span>.label_2)</span><br><span class="line">        <span class="variable language_">self</span>.stackedWidget.addWidget(<span class="variable language_">self</span>.page_3)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_5.addWidget(<span class="variable language_">self</span>.stackedWidget)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_4.addWidget(<span class="variable language_">self</span>.widget_2)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout_4.addLayout(<span class="variable language_">self</span>.horizontalLayout_4)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout.addWidget(<span class="variable language_">self</span>.content_bar)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># --- 3. 底部栏 ---</span></span><br><span class="line">        <span class="variable language_">self</span>.credits_bar = QFrame(<span class="variable language_">self</span>.drap_shadow_frame)</span><br><span class="line">        <span class="variable language_">self</span>.credits_bar.setObjectName(<span class="string">u&quot;credits_bar&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.credits_bar.setMaximumHeight(<span class="number">30</span>)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_3 = QHBoxLayout(<span class="variable language_">self</span>.credits_bar)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_3.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.frame_label_credits = QFrame(<span class="variable language_">self</span>.credits_bar)</span><br><span class="line">        <span class="variable language_">self</span>.layout_credits = QVBoxLayout(<span class="variable language_">self</span>.frame_label_credits)</span><br><span class="line">        <span class="variable language_">self</span>.layout_credits.setContentsMargins(<span class="number">20</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label_credits = QLabel(<span class="variable language_">self</span>.frame_label_credits)</span><br><span class="line">        <span class="variable language_">self</span>.label_credits.setObjectName(<span class="string">u&quot;label_credits&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.layout_credits.addWidget(<span class="variable language_">self</span>.label_credits)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.frame_grip = QFrame(<span class="variable language_">self</span>.credits_bar)</span><br><span class="line">        <span class="variable language_">self</span>.frame_grip.setObjectName(<span class="string">u&quot;frame_grip&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.frame_grip.setFixedSize(<span class="number">30</span>, <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_3.addWidget(<span class="variable language_">self</span>.frame_label_credits)</span><br><span class="line">        <span class="variable language_">self</span>.horizontalLayout_3.addWidget(<span class="variable language_">self</span>.frame_grip)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayout.addWidget(<span class="variable language_">self</span>.credits_bar)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.drap_shadow_layout.addWidget(<span class="variable language_">self</span>.drap_shadow_frame)</span><br><span class="line">        MainWindow.setCentralWidget(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.retranslateUi(MainWindow)</span><br><span class="line">        <span class="variable language_">self</span>.stackedWidget.setCurrentIndex(<span class="number">0</span>)</span><br><span class="line">        QMetaObject.connectSlotsByName(MainWindow)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">retranslateUi</span>(<span class="params">self, MainWindow</span>):</span><br><span class="line">        MainWindow.setWindowTitle(QCoreApplication.translate(<span class="string">&quot;MainWindow&quot;</span>, <span class="string">u&quot;MainWindow&quot;</span>, <span class="literal">None</span>))</span><br><span class="line">        <span class="variable language_">self</span>.Page1_button.setText(QCoreApplication.translate(<span class="string">&quot;MainWindow&quot;</span>, <span class="string">u&quot; Home&quot;</span>, <span class="literal">None</span>))</span><br><span class="line">        <span class="variable language_">self</span>.Page2_button.setText(QCoreApplication.translate(<span class="string">&quot;MainWindow&quot;</span>, <span class="string">u&quot; Dashboard&quot;</span>, <span class="literal">None</span>))</span><br><span class="line">        <span class="variable language_">self</span>.Page3_button.setText(QCoreApplication.translate(<span class="string">&quot;MainWindow&quot;</span>, <span class="string">u&quot; Settings&quot;</span>, <span class="literal">None</span>))</span><br><span class="line">        <span class="variable language_">self</span>.Search_but.setText(QCoreApplication.translate(<span class="string">&quot;MainWindow&quot;</span>, <span class="string">u&quot;Search&quot;</span>, <span class="literal">None</span>))</span><br><span class="line">        <span class="variable language_">self</span>.label_credits.setText(QCoreApplication.translate(<span class="string">&quot;MainWindow&quot;</span>, <span class="string">u&quot;Designed by PySide6 &amp; XYU&quot;</span>, <span class="literal">None</span>))</span><br></pre></td></tr></table></figure>
<h1 id="文件名-styles-py"><a href="#文件名-styles-py" class="headerlink" title="文件名: styles.py"></a>文件名: styles.py</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># --- 文件名: styles.py ---</span></span><br><span class="line"><span class="comment"># 这里我们用变量存储，方便 Python 调用（当然也可以用纯文本的 .qss 文件）</span></span><br><span class="line">MAIN_STYLE = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">/* 全局设置 */</span></span><br><span class="line"><span class="string">QWidget &#123;</span></span><br><span class="line"><span class="string">    font-family: &#x27;Segoe UI&#x27;, &#x27;Microsoft YaHei&#x27;, sans-serif;</span></span><br><span class="line"><span class="string">    font-size: 14px;</span></span><br><span class="line"><span class="string">    color: #E0E0E0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">QFrame#drap_shadow_frame &#123;</span></span><br><span class="line"><span class="string">    background-color: #2E3440; </span></span><br><span class="line"><span class="string">    border: 1px solid #4C566A;</span></span><br><span class="line"><span class="string">    border-radius: 15px;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">QFrame#title_bar &#123; background-color: transparent; border: none; &#125;</span></span><br><span class="line"><span class="string">QLabel#label_title &#123; color: #88C0D0; font-weight: bold; font-size: 16px; &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/* 侧边栏与内容区 */</span></span><br><span class="line"><span class="string">QFrame#content_bar, QWidget#widget, QWidget#widget_2, QStackedWidget &#123; background-color: transparent; border: none; &#125;</span></span><br><span class="line"><span class="string">QWidget#widget &#123; background-color: #3B4252; border-bottom-left-radius: 15px; &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/* 按钮通用 */</span></span><br><span class="line"><span class="string">QPushButton &#123; border: none; text-align: left; padding-left: 20px; color: #D8DEE9; background-color: transparent; &#125;</span></span><br><span class="line"><span class="string">QPushButton:hover &#123; background-color: #434C5E; border-left: 4px solid #88C0D0; color: #FFFFFF; &#125;</span></span><br><span class="line"><span class="string">QPushButton:pressed &#123; background-color: #4C566A; &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/* 窗口控制按钮 */</span></span><br><span class="line"><span class="string">QPushButton#btn_close, QPushButton#btn_minimize, QPushButton#btn_maximize &#123; padding: 0px; text-align: center; border-radius: 6px; &#125;</span></span><br><span class="line"><span class="string">QPushButton#btn_close &#123; background-color: #BF616A; &#125; </span></span><br><span class="line"><span class="string">QPushButton#btn_close:hover &#123; background-color: #D08770; &#125;</span></span><br><span class="line"><span class="string">QPushButton#btn_minimize &#123; background-color: #EBCB8B; &#125; </span></span><br><span class="line"><span class="string">QPushButton#btn_minimize:hover &#123; background-color: #F0E68C; &#125;</span></span><br><span class="line"><span class="string">QPushButton#btn_maximize &#123; background-color: #A3BE8C; &#125; </span></span><br><span class="line"><span class="string">QPushButton#btn_maximize:hover &#123; background-color: #B5CEA8; &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/* 搜索框 */</span></span><br><span class="line"><span class="string">QLineEdit#Search_con &#123; background-color: #434C5E; border-radius: 20px; padding-left: 20px; color: #ECEFF4; border: 1px solid transparent; font-size: 14px; &#125;</span></span><br><span class="line"><span class="string">QLineEdit#Search_con:focus &#123; border: 1px solid #88C0D0; background-color: #4C566A; &#125;</span></span><br><span class="line"><span class="string">QPushButton#Search_but &#123; background-color: #5E81AC; border-radius: 20px; color: white; text-align: center; padding-left: 0; font-weight: bold; &#125;</span></span><br><span class="line"><span class="string">QPushButton#Search_but:hover &#123; background-color: #81A1C1; &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/* ====== [高级时间样式] ====== */</span></span><br><span class="line"><span class="string">QLabel#label_time &#123;</span></span><br><span class="line"><span class="string">    font-family: &#x27;Segoe UI Light&#x27;, &#x27;Roboto Thin&#x27;, &#x27;Arial&#x27;;</span></span><br><span class="line"><span class="string">    font-size: 110px;</span></span><br><span class="line"><span class="string">    color: #FFFFFF;</span></span><br><span class="line"><span class="string">    font-weight: 100;</span></span><br><span class="line"><span class="string">    background-color: transparent;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/* ====== [高级日期样式] ====== */</span></span><br><span class="line"><span class="string">QLabel#label_date &#123;</span></span><br><span class="line"><span class="string">    font-family: &#x27;Segoe UI&#x27;, &#x27;Arial&#x27;;</span></span><br><span class="line"><span class="string">    font-size: 24px;</span></span><br><span class="line"><span class="string">    color: #88C0D0;</span></span><br><span class="line"><span class="string">    font-weight: bold;</span></span><br><span class="line"><span class="string">    letter-spacing: 5px;</span></span><br><span class="line"><span class="string">    background-color: transparent;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/* Page 2 选项按钮 */</span></span><br><span class="line"><span class="string">QPushButton#Page1_but1, QPushButton#Page1_but2, QPushButton#Page1_but3 &#123;</span></span><br><span class="line"><span class="string">    background-color: #434C5E; border-radius: 10px; text-align: center; padding-left: 0; font-size: 15px; color: #ECEFF4;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">QPushButton#Page1_but1:hover, QPushButton#Page1_but2:hover, QPushButton#Page1_but3:hover &#123;</span></span><br><span class="line"><span class="string">    background-color: #5E81AC; border: 1px solid #88C0D0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">QFrame#credits_bar &#123; background-color: #2E3440; border-top: 1px solid #434C5E; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px; &#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 弹窗样式也可以放这里</span></span><br><span class="line">MSGBOX_STYLE = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    QMessageBox &#123; background-color: #2E3440; color: #ECEFF4; &#125;</span></span><br><span class="line"><span class="string">    QLabel &#123; color: #ECEFF4; font-size: 14px; &#125;</span></span><br><span class="line"><span class="string">    QPushButton &#123; background-color: #4C566A; color: white; border-radius: 5px; padding: 5px 15px; border: 1px solid #2E3440; &#125;</span></span><br><span class="line"><span class="string">    QPushButton:hover &#123; background-color: #5E81AC; border: 1px solid #88C0D0; &#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="文件名-user-function-py"><a href="#文件名-user-function-py" class="headerlink" title="文件名: user_function.py"></a>文件名: user_function.py</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># --- 文件名: user_function.py ---</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserLogic</span>:</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">print_hello</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;✅ 功能测试：按钮点击成功！&quot;</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>软件开发 demo</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>PySide6</tag>
        <tag>GUI</tag>
        <tag>桌面应用程序</tag>
        <tag>demo</tag>
      </tags>
  </entry>
</search>
